## Смотрим лидера/реплику и конфигурацию
```bash
root@app ~ > patronictl -c /etc/patroni/config.yml show-config
loop_wait: 10
maximum_lag_on_failover: 1048576
postgresql:
  parameters:
    checkpoint_completion_target: 0.9
    default_statistics_target: 100
    effective_cache_size: 48GB
    effective_io_concurrency: 200
    hot_standby: 'on'
    maintenance_work_mem: 1GB
    max_connections: 3000
    max_parallel_maintenance_workers: 4
    max_parallel_workers: 48
    max_parallel_workers_per_gather: 4
    max_replication_slots: 8
    max_wal_senders: 8
    max_wal_size: 4GB
    max_worker_processes: 48
    min_wal_size: 1GB
    random_page_cost: 1.1
    shared_buffers: 4GB
    wal_buffers: 16MB
    wal_keep_segments: 20
    work_mem: 4194kB
  use_pg_rewind: true
  use_slots: true
retry_timeout: 10
ttl: 30

root@app /var/backups/postgresql > patronictl -c /etc/patroni/config.yml topology
+ Cluster: postgres ----------+---------+---------+-----+-----------+
| Member | Host               | Role    | State   |  TL | Lag in MB |
+--------+--------------------+---------+---------+-----+-----------+
| app3   | 192.168.87.62:5433 | Leader  | running | 400 |           |
| + app  | 192.168.87.60:5433 | Replica | running | 400 |         0 |
| + app2 | 192.168.87.61:5433 | Replica | running | 400 |         0 |
+--------+--------------------+---------+---------+-----+-----------+
```

## Перкключаем мастер на app сервер
```bash
# Выполняем switchover (переключение ролей)
patronictl -c /etc/patroni/config.yml switchover --candidate app --force

# Или используем более явную команду
patronictl -c /etc/patroni/config.yml switchover --master app3 --candidate app

# Проверяем результат
patronictl -c /etc/patroni/config.yml topology
```
