# OpenSIPS: –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Debian12.

–ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ —Å–º–æ—Ç—Ä–∏–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤–µ–Ω–¥–æ—Ä–∞:
- [OpenSIPS/opensips/blob/master/INSTALL](https://github.com/OpenSIPS/opensips/blob/master/INSTALL)
- [Documentation/Install-CompileAndInstall-3-6](https://www.opensips.org/Documentation/Install-CompileAndInstall-3-6)
<br/>

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
# –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã
apt update
apt install -y build-essential wget tar gcc g++ make cmake autoconf automake libtool pkg-config bison flex git curl

# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —è–¥—Ä–∞
apt install -y libncurses5-dev libssl-dev zlib1g-dev libpcre3-dev libxml2-dev libcurl4-openssl-dev
```
```bash
# –º–æ–¥—É–ª–∏ –≤—Å–µ
apt update && apt install -y \
  build-essential wget tar gcc g++ make cmake autoconf automake libtool pkg-config bison flex git curl \
  libncurses5-dev libssl-dev zlib1g-dev libpcre3-dev libxml2-dev libcurl4-openssl-dev \
  libjson-c-dev libsnmp-dev libmemcached-dev libradcli-dev libmicrohttpd-dev \
  libmysqlclient-dev libpq-dev libunistring-dev libhiredis-dev \
  libperl-dev python3-dev liblua5.3-dev libmongoc-dev libgeoip-dev \
  librabbitmq-dev libksba-dev libxslt1-dev libxmlrpc-core-c3-dev \
  libc-ares-dev libev-dev libevent-dev libprotobuf-c-dev libconfig-dev \
  libsctp-dev m4
```
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
ldconfig -p | grep -E "(ssl|pcre|mysqlclient|curl|xml2|ncurses)"
```

## –ö–ª–æ–Ω–∏—Ä—É–µ–º
```bash
cd /usr/src/
git clone https://github.com/OpenSIPS/opensips.git
cd opensips

git branch -a
git tag -l -n | ccze -A

git show 3.6.3
git checkout 3.6.3  # –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –∏–º–µ–Ω–Ω–æ –Ω–∞ —Ç–µ–≥
```

–ü–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Å–±–æ—Ä–∫–æ–π –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –æ—á–∏—Å—Ç–∫—É:
```bash
cd /usr/src/opensips
make proper
make clean
```


### üîç –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –∏–∑ —Ñ–∞–π–ª–∞ INSTALL

1.  **–û—à–∏–±–∫–∞ —Å –æ–ø—Ü–∏–µ–π `-l` –≤ 4.0.0**:
    –û–ø—Ü–∏—è `-l` (—Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π), —Å –∫–æ—Ç–æ—Ä–æ–π —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, **–≤–æ–∑–º–æ–∂–Ω–æ, —É—Å—Ç–∞—Ä–µ–ª–∞ –∏–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –≤ –Ω–æ–≤–æ–π –≤–µ—Ç–∫–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (master/4.0)**. –î–æ–∫—É–º–µ–Ω—Ç —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –≤–µ–±-—Å–∞–π—Ç –∫–∞–∫ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

2.  **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è —Å–±–æ—Ä–∫–∏**:
    –í —Ä–∞–∑–¥–µ–ª–µ **2. Howto Build** –µ—Å—Ç—å –≤–∞–∂–Ω–µ–π—à–µ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ (Note), –∫–æ—Ç–æ—Ä–æ–µ –æ–±—ä—è—Å–Ω—è–µ—Ç –≤–∞—à—É –≥–ª–∞–≤–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É:
    > **–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `prefix` –≤ –∫–æ–º–∞–Ω–¥–µ `make install`, —Ç–æ –≤–∞–º —Ç–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –≤–æ –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö `make`, —Ç–∞–∫–∏—Ö –∫–∞–∫ `make`, `make modules` –∏–ª–∏ `make all`.**

    –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç, –ø–æ—á–µ–º—É —É –≤–∞—Å –ø–æ–ª—É—á–∏–ª–∞—Å—å –≤–µ—Ä—Å–∏—è 4.0.0-dev: –≤—ã —Å–æ–±—Ä–∞–ª–∏ (`make all`) —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º (`/usr/local`), –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ, —Ä–∞–Ω–µ–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∏ (–∏–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –æ—Å—Ç–∞–ª–∏—Å—å —Ñ–∞–π–ª—ã –æ—Ç) –¥—Ä—É–≥–æ–π –≤–µ—Ä—Å–∏–∏, —Å–æ–±—Ä–∞–Ω–Ω–æ–π —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ –º–æ–≥–ª–∞ –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ä—ã–µ –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

3.  **–ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (`make proper`)**:
    –í —Ä–∞–∑–¥–µ–ª–µ **Make targets** —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ `make proper` –æ—á–∏—â–∞–µ—Ç —Ç–∞–∫–∂–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –≠—Ç–æ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥** –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å master –Ω–∞ —Ç–µ–≥ 3.6.3).

<br/>



## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Å–±–æ—Ä–∫–∏ OpenSIPS 3.6.3

–ò—Å—Ö–æ–¥—è –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤–µ–Ω–¥–æ—Ä–∞, –≤–æ—Ç —á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1.  **–í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ç–µ–≥–µ**:
    ```bash
    cd /usr/src/opensips
    git checkout 3.6.3
    ```

2.  **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ü–û–õ–ù–£–Æ –æ—á–∏—Å—Ç–∫—É, –∫–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ**:
    ```bash
    make proper
    ```
    –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ, —á—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏ (–≤–∫–ª—é—á–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏). –ë–µ–∑ —ç—Ç–æ–≥–æ —à–∞–≥–∞ —Å–±–æ—Ä–∫–∞ –º–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.

3.  **–°–æ–±–µ—Ä–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ, —è–≤–Ω–æ —É–∫–∞–∑–∞–≤ –ø—Ä–µ—Ñ–∏–∫—Å –≤–æ –í–°–ï–• –∫–æ–º–∞–Ω–¥–∞—Ö**:
    –°–ª–µ–¥—É—è –ø—Ä–∞–≤–∏–ª—É –∏–∑ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```bash
    make prefix=/usr/local all -j$(nproc)
    make prefix=/usr/local install
    ```
    –≥–¥–µ,
    - `prefix=/usr/local` - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è Makefile, –∑–∞–¥–∞—é—â–∞—è –ø—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏; —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫—É–¥–∞ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω OpenSIPS. `/usr/local` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—É—Ç—å –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º, —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
    - `-j$(nproc)` - –ü–∞—Ä–∞–º–µ—Ç—Ä –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏; `-j = jobs` (–∑–∞–¥–∞—á–∏), `$(nproc)` = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä CPU. –£—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É –≤ N —Ä–∞–∑
    
    –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø—É—Ç–∏ –±—É–¥—É—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö.

5.  **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
    ```bash
    /usr/local/sbin/opensips -V
    ```
    –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è `version: opensips 3.6.3`.

###  –í—ã–≤–æ–¥ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

*   **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞**: –í–µ—Ä–æ—è—Ç–Ω–æ, –≤ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å–º–µ—à–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –æ—Ç —Ä–∞–∑–Ω—ã—Ö —Å–±–æ—Ä–æ–∫ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –Ω–µ —Å–æ–±–ª—é–¥–∞–ª–æ—Å—å –ø—Ä–∞–≤–∏–ª–æ –µ–¥–∏–Ω–æ–≥–æ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (`make proper`) –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏–π.
*   **–†–µ—à–µ–Ω–∏–µ**: –ß–µ—Ç–∫–æ —Å–ª–µ–¥—É–π—Ç–µ —Ü–µ–ø–æ—á–∫–µ `git checkout` -> `make proper` -> —Å–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
*   **–î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏**: –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ 3.6.3 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ `opensips-cli` (—Å—Å—ã–ª–∫–∞ –Ω–∞ –µ—ë —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ INSTALL).


