# –°–æ–∑–¥–∞–Ω–∏–µ deb –ø–∞–∫–µ—Ç–∞

–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–º. 
- [—Å–±–æ—Ä–∫–∞ pyinstaller –≤ uv](https://github.com/sherbettt/BASH-cheats/blob/main/32.%20uv%20–¥–ª—è%20python.md)
- [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–∞ deb](https://www.dmosk.ru/instruktions.php?object=build-deb)
- [–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ debian](https://www.debian.org/doc/manuals/maint-guide/dreq.ru.html#rules)


## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
apt update; apt install -y debhelper dpkg-dev devscripts equivs;
```
<br/>


## –û–±—â–∏–π –≤–∏–¥

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ python –ø—Ä–æ–µ–∫—Ç:
```bash
root@For-DEB12-builds ~/git
12:06:00 # ll runtel_opensips_sbc/
–∏—Ç–æ–≥–æ 639k
drwxr-xr-x 8 root root 4,1k —è–Ω–≤ 19 11:26  ./
drwxr-xr-x 7 root root 4,1k —è–Ω–≤ 19 11:38  ../
drwxr-xr-x 7 root root 4,1k —è–Ω–≤ 13 11:37  .git/
drwxr-xr-x 5 root root 4,1k —è–Ω–≤ 19 09:09  .venv/
drwxr-xr-x 3 root root 4,1k —è–Ω–≤ 19 09:37  build/
drwxr-xr-x 6 root root 4,1k —è–Ω–≤ 19 11:32  debian/
drwxr-xr-x 2 root root 4,1k —è–Ω–≤ 19 09:37  dist/
drwxr-xr-x 6 root root 4,1k —è–Ω–≤ 15 06:51  web-ui/
-rw-r--r-- 1 root root  82k —è–Ω–≤ 19 08:58  app.db
-rw-r--r-- 1 root root 123k —è–Ω–≤ 13 11:27  app.py
*****
-rwxr-xr-x 1 root root 1,7k —è–Ω–≤ 13 11:27  block_ip_fail2ban.py*
*****
-rwxr-xr-x 1 root root 1,8k —è–Ω–≤ 13 11:27  init_rate_limits.py*
*****
# –∏ —Ç.–¥.
```

–°–æ–±—Ä–∞–Ω–Ω—ã–π, –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
```bash
root@For-DEB12-builds ~/git
12:07:02 # ll runtel_opensips_sbc/dist/
–∏—Ç–æ–≥–æ 25M
drwxr-xr-x 2 root root 4,1k —è–Ω–≤ 19 09:37 ./
drwxr-xr-x 8 root root 4,1k —è–Ω–≤ 19 11:26 ../
-rwxr-xr-x 1 root root  25M —è–Ω–≤ 19 09:37 sbc-app*
```

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `runtel_opensips_sbc` –∏ —Å–æ–∑–¥–∞—ë–º —Ç–∏–ø–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–±–æ—Ä–∫–∏ `debian` —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```bash
root@For-DEB12-builds ~/git/runtel_opensips_sbc/debian
12:14:47 # ll
-rw-r--r-- 1 root root  644 —è–Ω–≤ 19 11:28 changelog
-rw-r--r-- 1 root root    2 —è–Ω–≤ 13 11:46 compat
-rw-r--r-- 1 root root  970 —è–Ω–≤ 19 11:18 control
-rw-r--r-- 1 root root  301 —è–Ω–≤ 19 11:27 copyright
-rw-r--r-- 1 root root  382 —è–Ω–≤ 15 07:24 install_old
-rwxr-xr-x 1 root root  173 —è–Ω–≤ 16 11:59 rules*
-rw-r--r-- 1 root root   99 —è–Ω–≤ 19 10:46 runtel-sbc-app.install
-rw-r--r-- 1 root root  383 —è–Ω–≤ 16 12:18 runtel-sbc-cfg.install
-rw-r--r-- 1 root root  530 —è–Ω–≤ 15 07:42 runtel-sbc-web.install
```

1. –§–∞–π–ª `install` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `install_old`, –µ—Å–ª–∏ –º—ã –±—Ä–∞–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∞–Ω–Ω–æ–π –ø–∞–ø–∫–∏ –∑–∞ –æ—Å–Ω–æ–≤—É –∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
2. –§–∞–π–ª—ã `runtel-sbc-*` —Å–æ–∑–¥–∞–Ω—ã —Ä—É–∫–∞–º–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞.
<br/>


## –ü—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:

### **changelog**

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω changelog?**
1. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** - —á—Ç–æ, –∫–æ–≥–¥–∞ –∏ –∫–µ–º –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ
2. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–∞
3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —á—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
4. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ Debian Policy** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Å–±–æ—Ä–∫–∏

```bash
root@For-DEB12-builds ~/git/runtel_opensips_sbc/debian
12:19:22 # ccat changelog
runtel-sbc (1.0.0-8) unstable; urgency=medium

  * –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª copyright
  * –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –≤ changelog

 -- Runtel <support@runtel.ru>  Mon, 19 Jan 2026 11:30:00 +0300

runtel-sbc (1.0.0-7) unstable; urgency=medium

  * –î–æ–±–∞–≤–ª–µ–Ω –ø–∞–∫–µ—Ç runtel-sbc-app —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º
  * –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ amd64

 -- Runtel <support@runtel.ru>  Mon, 19 Jan 2025 11:21:00 +0300

runtel-sbc (1.0.0-6) unstable; urgency=medium

  * Initial release with runtel-sbc-cfg and runtel-sbc-web

 -- Runtel <support@runtel.ru>  Thu, 16 Jan 2025 12:19:00 +0300
```


### **rules**
–≠—Ç–æ `Makefile`, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Å–±–æ—Ä–∫–∏ –ø–∞–∫–µ—Ç–∞. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É `debhelper` ‚Äî –Ω–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏ Debian –ø–∞–∫–µ—Ç–æ–≤.
```bash
root@For-DEB12-builds ~/git/runtel_opensips_sbc/debian
12:19:28 # ccat rules 
#!/usr/bin/make -f
# See debhelper(7) (uncomment to enable)
# output every command that modifies files on the build system.
DH_VERBOSE = 1
export DH_OPTIONS=-v

%:  
        dh $@
```


### **compat**
–§–∞–π–ª debian/compat –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω! –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Ä—Å–∏—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ debhelper. –≠—Ç–æ –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–µ—Ä—Å–∏—é `debhelper`.






<br/>

## –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ —Ñ–∞–π–ª–∞–º

<details>
<summary>‚ùó üîç –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã rules ‚ùó</summary>

## **–†–∞–∑–±–æ—Ä –Ω–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞:**

```makefile
#!/usr/bin/make -f
# –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π Makefile

# See debhelper(7) (uncomment to enable)
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
# output every command that modifies files on the build system.
DH_VERBOSE = 1  # –í–∫–ª—é—á–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
export DH_OPTIONS=-v  # –û–ø—Ü–∏–∏ –¥–ª—è debhelper

%:  # –¶–µ–ª–µ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Å–µ—Ö —Ü–µ–ª–µ–π
        dh $@  # –ü–µ—Ä–µ–¥–∞—ë—Ç –≤—Å–µ —Ü–µ–ª–∏ —É—Ç–∏–ª–∏—Ç–µ dh
```

## **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `dh` (debhelper):**

–£—Ç–∏–ª–∏—Ç–∞ `dh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–≥–∏ —Å–±–æ—Ä–∫–∏:

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ (targets):**
```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –ø–∞–∫–µ—Ç–∞
debian/rules clean    # –û—á–∏—Å—Ç–∫–∞
debian/rules build    # –°–±–æ—Ä–∫–∞
debian/rules binary   # –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤–æ–∏—á–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
```

### **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `dh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
1. **clean** - —É–¥–∞–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
2. **build** - —Å–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å)
3. **install** - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
4. **binary** - —Å–æ–∑–¥–∞—ë—Ç `.deb` –ø–∞–∫–µ—Ç—ã

##  **–ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ `debian/rules`:**

```bash
# 1. –û—á–∏—Å—Ç–∫–∞
dh clean
# ‚Üí —É–¥–∞–ª—è–µ—Ç build/, dist/, .pyc —Ñ–∞–π–ª—ã –∏ —Ç.–¥.

# 2. –°–±–æ—Ä–∫–∞
dh build
# ‚Üí –¥–ª—è Python –ø—Ä–æ–µ–∫—Ç–æ–≤ –æ–±—ã—á–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç
# ‚Üí –¥–ª—è C/C++ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
dh binary
# ‚Üí —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–∫–µ—Ç–æ–≤ –≤ debian/
# ‚Üí –∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã —Å–æ–≥–ª–∞—Å–Ω–æ *.install
# ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
```

##  **–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ?**

### **–î–ª—è Python –ø—Ä–æ–µ–∫—Ç–∞ —Å PyInstaller:**

```makefile
#!/usr/bin/make -f

%:
        dh $@

# –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ü–µ–ª–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
override_dh_auto_build:
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–±–æ—Ä–∫—É —á–µ—Ä–µ–∑ PyInstaller
        pyinstaller --onefile --clean app.py

override_dh_auto_install:
        # –ö–∞—Å—Ç–æ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
        install -D -m 755 dist/sbc-app $(CURDIR)/debian/runtel-sbc-app/usr/bin/sbc-app
```

##  **–ü–æ—á–µ–º—É —Ç–∞–∫–æ–π –ø—Ä–æ—Å—Ç–æ–π —Ñ–∞–π–ª —Ä–∞–±–æ—Ç–∞–µ—Ç?**

–ü–æ—Ç–æ–º—É —á—Ç–æ:
1. **–ù–∞—à –ø—Ä–æ–µ–∫—Ç –Ω–∞ Python** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
2. **–§–∞–π–ª—ã —É–∂–µ —Å–æ–±—Ä–∞–Ω—ã** (—á–µ—Ä–µ–∑ PyInstaller)
3. **`debhelper` –¥–µ–ª–∞–µ—Ç –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ:
   - `debian/control` (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ–ø–∏—Å–∞–Ω–∏–µ)
   - `debian/*.install` (–∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∫—É–¥–∞ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å)
   - `debian/changelog` (–≤–µ—Ä—Å–∏—è)
   - `debian/copyright` (–ª–∏—Ü–µ–Ω–∑–∏—è)

##  **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ `debuild`:**

```bash
debuild -us -uc -b
# ‚Üì –≤—ã–∑—ã–≤–∞–µ—Ç dpkg-buildpackage
# ‚Üì –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç debian/rules clean
# ‚Üì –∑–∞—Ç–µ–º debian/rules build  
# ‚Üì –∑–∞—Ç–µ–º debian/rules binary
# ‚Üì –∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ dh –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
```

##  **–ü—Ä–∏–º–µ—Ä –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ `rules` —Ñ–∞–π–ª–∞:**

```makefile
#!/usr/bin/make -f

export DH_VERBOSE=1
export PYBUILD_NAME=runtel-sbc

%:
        dh $@ --with python3

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ü–µ–ª–∏
override_dh_auto_test:
        # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π
        python -m pytest tests/

override_dh_install:
        # –ö–∞—Å—Ç–æ–º–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
        dh_install
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        install -D -m 644 config.ini $(CURDIR)/debian/runtel-sbc-app/etc/runtel/config.ini

override_dh_strip:
        # –ù–µ strip'–∏—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ Python
        # (–æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
        :
```

</details> 

------------------------------------------------------------------------------------------------------------------

<details>
<summary>‚ùó üîç –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã compat ‚ùó</summary>

–§–∞–π–ª `debian/compat` –æ—á–µ–Ω—å –≤–∞–∂–µ–Ω! –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–≤–µ—Ä—Å–∏—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ debhelper**.

## üéØ **–ß—Ç–æ —Ç–∞–∫–æ–µ `debian/compat`?**

–≠—Ç–æ –æ–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π **—á–∏—Å–ª–æ**, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤–µ—Ä—Å–∏—é `debhelper`:

```
9
```

## üî¢ **–ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —á–∏—Å–ª–∞:**

- **9** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å debhelper v9
- **10** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å debhelper v10  
- **11** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å debhelper v11
- **12** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å debhelper v12
- **13** - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å debhelper v13 (—Ç–µ–∫—É—â–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è)

## ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ:**

–£ –≤–∞—Å —Å—Ç–æ–∏—Ç **9**, –Ω–æ –≤ –ª–æ–≥–∞—Ö —Å–±–æ—Ä–∫–∏ –≤–∏–¥–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:

```
dh: warning: Compatibility levels before 10 are deprecated (level 9 in use)
```

## üîß **–ó–∞—á–µ–º –Ω—É–∂–µ–Ω —ç—Ç–æ—Ç —Ñ–∞–π–ª?**

### **1. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ debhelper:**
```bash
# –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
# v9: —Å—Ç–∞—Ä—ã–π, deprecated
# v13: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, —Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏
```

### **2. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
```bash
# –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–ª—Å—è —Å v9, –æ–Ω –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
# –î–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ —Å–∏—Å—Ç–µ–º–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω v13
```

### **3. –£–ø—Ä–∞–≤–ª—è–µ—Ç deprecated —Ñ—É–Ω–∫—Ü–∏—è–º–∏:**
```bash
# –í v9 –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –∏–Ω–∞—á–µ
# –í v13 –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã
```

## üöÄ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö:**

### **–° `compat = 9`:**
```bash
# –£—Å—Ç–∞—Ä–µ–≤—à–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö
# –ú–µ–Ω—å—à–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
# –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
```

### **–° `compat = 13`:**
```bash
# –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
# –ë–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
# –ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
# –¢—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
```

## üì¶ **–ö–∞–∫–æ–π compat –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ compat 13 - —ç—Ç–æ —Ç–µ–∫—É—â–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç
echo "13" > debian/compat

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ debhelper-compat –≤ control
# –í debian/control –¥–æ–±–∞–≤–∏—Ç—å:
# Build-Depends: debhelper-compat (= 13)
```

## üîÑ **–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏:**

### **Debhelper v9 (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π):**
```makefile
# –°—Ç–∞—Ä—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
#!/usr/bin/make -f

%:
        dh $@
```

### **Debhelper v13 (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π):**
```makefile
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
#!/usr/bin/make -f

%:
        dh $@ --with python3
```

## üéØ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å compat**
```bash
echo "13" > ~/git/runtel_opensips_sbc/debian/compat
```

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å debhelper-compat (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# 1. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª compat
rm ~/git/runtel_opensips_sbc/debian/compat

# 2. –û–±–Ω–æ–≤–∏—Ç—å control —Ñ–∞–π–ª
cat > ~/git/runtel_opensips_sbc/debian/control << 'EOF'
Source: runtel-sbc
Section: misc
Priority: optional
Maintainer: Runtel <support@runtel.ru>
Build-Depends: debhelper-compat (= 13)  # ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û
Standards-Version: 4.6.2

Package: runtel-sbc-cfg
Architecture: all
Depends: ${misc:Depends}
Description: Runtel OpenSIPS SBC configuration
 Configuration for Runtel OpenSIPS SBC.

Package: runtel-sbc-web
Architecture: all
Depends: ${misc:Depends}
Description: Runtel OpenSIPS SBC web interface
 Web management interface for Runtel OpenSIPS SBC.

Package: runtel-sbc-app
Architecture: amd64
Depends: ${shlibs:Depends}, ${misc:Depends}, libc6, libsqlite3-0
Description: SBC API Server Application
 Standalone executable SBC API server.
EOF
```

## üöÄ **–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è compat:**

```bash
# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø–∞–∫–µ—Ç—ã
cd ~/git/runtel_opensips_sbc
debuild -us -uc -b

# –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ compat 9 –∏—Å—á–µ–∑–Ω—É—Ç
```

## üìù **–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å?**

1. **–£–±–∏—Ä–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è** - —á–∏—Å—Ç—ã–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏
2. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –ª—É—á—à–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
3. **–ë—É–¥—É—â–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - v9 —Å–∫–æ—Ä–æ –Ω–µ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è
4. **–õ—É—á—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å Python, systemd –∏ –¥—Ä—É–≥–∏–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏

## üé™ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä:**

### **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```
debian/
‚îú‚îÄ‚îÄ control          # –° Build-Depends: debhelper-compat (= 13)
‚îú‚îÄ‚îÄ rules            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å v13
‚îú‚îÄ‚îÄ changelog
‚îú‚îÄ‚îÄ copyright
‚îú‚îÄ‚îÄ *.install
‚îî‚îÄ‚îÄ (–ù–ï–¢ –§–ê–ô–õ–ê compat)
```

### **–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (—É –≤–∞—Å —Å–µ–π—á–∞—Å):**
```
debian/
‚îú‚îÄ‚îÄ control          # –ë–µ–∑ Build-Depends
‚îú‚îÄ‚îÄ rules
‚îú‚îÄ‚îÄ changelog
‚îú‚îÄ‚îÄ copyright
‚îú‚îÄ‚îÄ *.install
‚îî‚îÄ‚îÄ compat           # –°–æ–¥–µ—Ä–∂–∏—Ç "9"
```

## ‚ö° **–ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏—Ç–µ compat
echo "13" > ~/git/runtel_opensips_sbc/debian/compat

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ debhelper-compat
rm ~/git/runtel_opensips_sbc/debian/compat
# –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ control –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ
```

**–ò—Ç–æ–≥:** –§–∞–π–ª `debian/compat` –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –≤–µ—Ä—Å–∏—é debhelper. –£ –≤–∞—Å —Å—Ç–æ–∏—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∞—è v9, –ª—É—á—à–µ –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ v13 –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ —á–∏—Å—Ç—ã—Ö –ª–æ–≥–æ–≤ —Å–±–æ—Ä–∫–∏! üöÄ
</details> 

------------------------------------------------------------------------------------------------------------------







