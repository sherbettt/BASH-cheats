Тренировка на https://regex101.com/
<br/> Статья https://ru.wikipedia.org/wiki/Регулярные_выражения

См. также [Работа с файлами](https://github.com/sherbettt/BASH-cheats/blob/main/09.1.%20Работа%20с%20файлами.md)


## **1. Базовые метасимволы**  
### **`.` — Любой символ (кроме `\n`)**  
**Пример:**  
```regex
a.c
```
**Совпадения:**  
- `"abc"` ✅  
- `"aXc"` ✅  
- `"a\nc"` ❌ (`.` не включает перевод строки, если не стоит флаг `s`)  


### **`^` — Начало строки**  
**Пример:**  
```regex
^Hello
```
**Совпадения:**  
- `"Hello world"` ✅  
- `"Say Hello"` ❌  


### **`$` — Конец строки**  
**Пример:**  
```regex
world$
```
**Совпадения:**  
- `"Hello world"` ✅  
- `"worldly"` ❌  


### **`*` — 0 или более повторений**  
**Пример:**  
```regex
ab*c
```
**Совпадения:**  
- `"ac"` ✅ (`b` нет)  
- `"abc"` ✅  
- `"abbc"` ✅  
- `"aXc"` ❌  



### **`+` — 1 или более повторений**  
**Пример:**  
```regex
ab+c
```
**Совпадения:**  
- `"abc"` ✅  
- `"abbc"` ✅  
- `"ac"` ❌  



### **`?` — 0 или 1 повторение**  
**Пример:**  
```regex
colou?r
```
**Совпадения:**  
- `"color"` ✅  
- `"colour"` ✅  
- `"colouur"` ❌  



## **2. Квантификаторы `{ }`**  
### **`{n}` — Ровно `n` раз**  
**Пример:**  
```regex
a{3}
```
**Совпадения:**  
- `"aaa"` ✅  
- `"aa"` ❌  



### **`{n,}` — `n` или более раз**  
**Пример:**  
```regex
a{2,}
```
**Совпадения:**  
- `"aa"` ✅  
- `"aaa"` ✅  
- `"a"` ❌  



### **`{n,m}` — От `n` до `m` раз**  
**Пример:**  
```regex
a{2,4}
```
**Совпадения:**  
- `"aa"` ✅  
- `"aaa"` ✅  
- `"aaaa"` ✅  
- `"a"` ❌  



## **3. Классы символов `[ ]`**  
### **`[abc]` — Любой из символов `a`, `b`, `c`**  
**Пример:**  
```regex
gr[ae]y
```
**Совпадения:**  
- `"gray"` ✅  
- `"grey"` ✅  
- `"gry"` ❌  



### **`[^abc]` — Любой символ, кроме `a`, `b`, `c`**  
**Пример:**  
```regex
[^0-9]
```
**Совпадения:**  
- `"A"` ✅  
- `"5"` ❌  



### **`\d` — Цифра (`[0-9]`)**  
**Пример:**  
```regex
\d+
```
**Совпадения:**  
- `"123"` ✅  
- `"abc"` ❌  

 

### **`\w` — Буква, цифра или `_` (`[a-zA-Z0-9_]`)**  
**Пример:**  
```regex
\w+
```
**Совпадения:**  
- `"user123"` ✅  
- `"hello_world"` ✅  
- `"@admin"` ❌  

 

## **4. Группировка `( )` и альтернативы `|`**  
### **`(abc)` — Группа захвата**  
**Пример:**  
```regex
(ab)+
```
**Совпадения:**  
- `"abab"` ✅ (группа `ab` повторяется)  
- `"abb"` ❌  

 

### **`|` — Логическое "ИЛИ"**  
**Пример:**  
```regex
cat|dog
```
**Совпадения:**  
- `"cat"` ✅  
- `"dog"` ✅  
- `"bird"` ❌  

 

## **5. Экранирование `\`**  
### **`\.` — Точка (не любой символ)**  
**Пример:**  
```regex
example\.com
```
**Совпадения:**  
- `"example.com"` ✅  
- `"exampleXcom"` ❌  

 

## **6. Утверждения (lookahead, lookbehind)**  
### **`(?=...)` — Позитивный просмотр вперёд**  
**Пример:**  
```regex
\d(?=px)
```
**Совпадения:**  
- В `"2px"` найдёт `2`, если после него `px`  

 

### **`(?<=...)` — Просмотр назад**  
**Пример:**  
```regex
(?<=\$)\d+
```
**Совпадения:**  
- В `"$100"` найдёт `100`, если перед ним `$`  

 

## **7. Флаги (модификаторы)**  
### **`/i` — Регистронезависимый поиск**  
**Пример:**  
```regex
/hello/i
```
**Совпадения:**  
- `"Hello"` ✅  
- `"HELLO"` ✅  

 

### **`/g` — Глобальный поиск (все вхождения)**  
**Пример (JavaScript):**  
```javascript
"a1 a2 a3".match(/a\d/g) // ["a1", "a2", "a3"]
```

 

### **`/m` — Многострочный режим (`^` и `$` работают для каждой строки)**  
**Пример:**  
```regex
/^hello/m
```
**Совпадения:**  
```
hello world  ✅ (первая строка)
test hello   ❌
```
----------------------------------------------------------------------------
Разберём регулярное выражение **`45(\d{4})`** по частям:

### **Структура:**
1. **`45`** — ищет **точное совпадение с цифрами "45"**.
2. **`\d{4}`** — означает **ровно 4 цифры** (от `0` до `9`).  
   - `\d` — любая цифра (эквивалентно `[0-9]`).  
   - `{4}` — квантификатор, указывающий на ровно 4 повторения.  
3. **`()`** — создаёт **группу захвата** (то, что попадает в скобки, можно будет отдельно извлечь).

### **Как это работает?**
- Регулярка ищет строки, где сначала идёт **"45"**, а потом **4 любые цифры**.  
- Часть с 4 цифрами **запоминается** благодаря скобкам (её можно получить отдельно, например, в результатах замены или при программной обработке).


### **Примеры совпадений:**
| Строка       | Совпадение | Группа захвата (`\1`) |
|--------------|------------|----------------------|
| `451234`     | `451234`   | `1234`               |
| `450987`     | `450987`   | `0987`               |
| `45abcd`     | —          | —                    |
| `12345678`   | —          | —                    |
| `TEST451234` | `451234`   | `1234`               |



### **Где может применяться?**
1. **Извлечение кодов или идентификаторов** (если `45` — префикс, а следующие 4 цифры — уникальный номер).  
2. **Парсинг данных** (например, из строки `Order: 451234` извлечь `1234`).  
3. **Валидация ввода** (если требуется формат `45XXXX`, где `X` — цифра).



### **Проверка на regex101.com**  
Попробуйте подставить эти примеры в [regex101.com](https://regex101.com/) и посмотрите, как работает регулярка. Например:  
- **Test String:** `451234`, `450000`, `45abc1`  
- **Результат:**  
  - Для `451234` → совпадение `451234`, группа `1234`.  
  - Для `45abc1` → нет совпадений (так как после `45` идут буквы, а не 4 цифры).  

Если нужно **строгое совпадение всей строки** (а не части), добавьте якоря:  
```regex
^45\d{4}$
```
Тогда `TEST451234` не подойдёт, а `451234` — подойдёт.

-------------------------------------------------------------------------

Если вам нужно найти **все вхождения** шаблона `45XXXX` (где `XXXX` — 4 цифры) в строке или столбце данных, а не только первое, то нужно учитывать два ключевых момента:  

### **1. Использование флага `g` (global)**
Регулярное выражение по умолчанию ищет только **первое совпадение**. Чтобы найти **все вхождения**, добавьте флаг **`g`** (глобальный поиск).  

#### Пример в **JavaScript**:
```javascript
const text = "451234 450000 45abc1 TEST451234";
const regex = /45\d{4}/g;  // флаг `g` для поиска всех совпадений
const matches = text.match(regex);  

console.log(matches); // ["451234", "450000", "451234"]
```
**Результат:**  
✅ `451234` (из начала строки)  
✅ `450000`  
✅ `451234` (из `TEST451234`)  



### **2. Если данные в столбце (например, Excel или БД)**
Если у вас данные в таблице (например, Excel или SQL), то:  

#### **Excel** (с помощью Power Query или формул):
- **Power Query**: Используйте `Text.Select` или `Text.Split` с регулярками (если поддерживается).  
- **Формула**: В Google Sheets можно использовать `REGEXEXTRACT` или `REGEXREPLACE`.  

#### **SQL** (например, PostgreSQL):
```sql
SELECT regexp_matches(column_name, '45\d{4}', 'g') 
FROM table_name;
```
(Флаг `'g'` обеспечивает поиск всех вхождений.)  



### **3. Как проверить на regex101.com?**  
1. Вставьте вашу строку в **Test String**.  
2. Добавьте флаг **`g`** (в верхнем меню regex101).  
3. Убедитесь, что подсвечиваются **все совпадения**.  

#### **Пример:**
- **Регулярка:** `45\d{4}`  
- **Строка:** `"451234 450000 45abc1 TEST451234"`  
- **Результат:**  
  - `451234` (первое вхождение)  
  - `450000`  
  - `451234` (в `TEST451234`)  



### **4. Если нужно извлечь только числа после `45` (группа захвата)**
Используйте **скобки `()` + флаг `g`**:
```regex
45(\d{4})
```
#### **В JavaScript:**
```javascript
const text = "451234 450000 TEST451234";
const regex = /45(\d{4})/g;
let match;
const results = [];

while ((match = regex.exec(text)) !== null) {
  results.push(match[1]); // match[1] — первая группа захвата (4 цифры)
}

console.log(results); // ["1234", "0000", "1234"]
```
**Результат:**  
✅ `1234` (из `451234`)  
✅ `0000` (из `450000`)  
✅ `1234` (из `TEST451234`)  



### **Итог:**
| Что нужно?                | Регулярка          | Флаги  | Пример кода/инструмент |
|---------------------------|-------------------|--------|------------------------|
| Найти **все** `45XXXX`    | `45\d{4}`         | `g`    | `text.match(/45\d{4}/g)` |
| Извлечь **только 4 цифры**| `45(\d{4})`       | `g`    | `regex.exec()` (цикл)  |
| Проверить в **Excel/SQL** | Зависит от системы | `g` (если поддерживается) | Power Query, `REGEXEXTRACT` |







-----------------------------------------------------------------------------
## **1. Валидация email**  
**Регулярка:**  
```regex
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
```
**Пояснение:**  
- `^[a-zA-Z0-9._%+-]+` — начало строки, символы до `@` (буквы, цифры, `.`, `_`, `%`, `+`, `-`)  
- `@[a-zA-Z0-9.-]+` — домен после `@` (можно с точками и дефисами)  
- `\.[a-zA-Z]{2,}$` — доменная зона (от 2+ букв, например `.com`, `.io`)  

**Примеры:**  
✅ `user@example.com`  
✅ `john.doe+123@sub.domain.co.uk`  
❌ `invalid@.com`  

 

## **2. Поиск всех HTML-тегов**  
**Регулярка:**  
```regex
<([a-z][a-z0-9]*)[^>]*>(.*?)<\/\1>
```
**Пояснение:**  
- `<([a-z][a-z0-9]*)` — открывающий тег (`<div>`, `<h1>`)  
- `[^>]*>` — любые символы, кроме `>`, до закрытия тега  
- `(.*?)` — содержимое тега (нежадный поиск)  
- `<\/\1>` — закрывающий тег (`</div>`, `</h1>`)  

**Пример:**  
```html
<div class="header">Title</div>  → Найдёт `<div>Title</div>`
```

 

## **3. Поиск всех URL**  
**Регулярка:**  
```regex
https?:\/\/(?:www\.)?[a-zA-Z0-9-]+\.[a-zA-Z]{2,}(?:\/[^\s]*)?
```
**Пояснение:**  
- `https?` — `http` или `https`  
- `:\/\/` — экранированные `://`  
- `(?:www\.)?` — опциональный `www.`  
- `[a-zA-Z0-9-]+\.[a-zA-Z]{2,}` — домен (например, `google.com`)  
- `(?:\/[^\s]*)?` — опциональный путь (`/page`, `/search?q=regex`)  

**Примеры:**  
✅ `https://www.example.com/path`  
✅ `http://sub.domain.org`  
❌ `ftp://example.com`  

 

## **4. Парсинг логов (дата + сообщение)**  
**Лог:**  
```
2023-10-25 12:30:45 ERROR: Disk full
2023-10-25 12:31:10 INFO: Backup completed
```
**Регулярка:**  
```regex
^(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}) (\w+): (.+)$
```
**Разбор:**  
- `^(\d{4}-\d{2}-\d{2})` — дата (`2023-10-25`)  
- `(\d{2}:\d{2}:\d{2})` — время (`12:30:45`)  
- `(\w+)` — уровень лога (`ERROR`, `INFO`)  
- `(.+)$` — сообщение (`Disk full`)  

**Результат (в группах):**  
1. `2023-10-25`  
2. `12:30:45`  
3. `ERROR`  
4. `Disk full`  

 

## **5. Поиск чисел с плавающей точкой**  
**Регулярка:**  
```regex
-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?
```
**Пояснение:**  
- `-?` — опциональный минус  
- `\d+` — целая часть (`123`)  
- `(?:\.\d+)?` — опциональная дробная часть (`.456`)  
- `(?:[eE][+-]?\d+)?` — опциональная экспонента (`e-10`)  

**Примеры:**  
✅ `3.14`  
✅ `-0.001`  
✅ `2e10`  
❌ `1.2.3`  

 

## **6. Поиск всех хештегов (#tag)**  
**Регулярка:**  
```regex
#\w+
```
**Пример:**  
```text
Hello #world! This is a #regex example.
```
**Найдёт:**  
- `#world`  
- `#regex`  

 

## **7. Удаление HTML-комментариев**  
**Регулярка:**  
```regex
<!--.*?-->
```
**Пример:**  
```html
<!-- Hidden comment --> <p>Visible</p> <!-- Another -->
```
**После замены на `""`:**  
```html
<p>Visible</p>
```

 

## **8. Проверка сложности пароля**  
**Условия:**  
- 8+ символов  
- минимум 1 цифра  
- минимум 1 буква в верхнем регистре  
- минимум 1 спецсимвол  

**Регулярка:**  
```regex
^(?=.*\d)(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,}$
```
**Пояснение:**  
- `(?=.*\d)` — минимум 1 цифра  
- `(?=.*[A-Z])` — минимум 1 заглавная буква  
- `(?=.*[!@#$%^&*])` — минимум 1 спецсимвол  
- `.{8,}` — длина от 8 символов  

**Примеры:**  
✅ `Passw0rd!`  
❌ `weakpass`  

 

## **9. Разбор CSV строки**  
**CSV:**  
```csv
"John","Doe","30","New York"
```
**Регулярка:**  
```regex
"(.*?)"|([^,]+)
```
**Пояснение:**  
- `"(.*?)"` — значения в кавычках (`"John"`)  
- `|` — или  
- `([^,]+)` — значения без кавычек (`30`)  

**Результат:**  
1. `John`  
2. `Doe`  
3. `30`  
4. `New York`  

 

## **10. Поиск дублирующихся слов**  
**Регулярка:**  
```regex
\b(\w+)\b\s+\1\b
```
**Пример:**  
```text
This is is a test test sentence.
```
**Найдёт:**  
- `is is`  
- `test test`  

 

## **Итог**  
Эти примеры охватывают **сложные, но полезные** сценарии:  
✅ Валидация данных (email, пароль)  
✅ Парсинг структурированного текста (логи, CSV)  
✅ Поиск паттернов (хештеги, дубликаты)  
✅ Очистка текста (HTML-комментарии)  

Регулярные выражения — мощный инструмент для поиска и замены текста. 
Основные концепции:  
- **`.`**, `^`, `$` — базовые метасимволы  
- `*`, `+`, `?`, `{ }` — квантификаторы  
- `[ ]`, `\d`, `\w`, `\s` — классы символов  
- `( )`, `|` — группировка и "ИЛИ"  
- `\` — экранирование спецсимволов  
- `(?= )`, `(?<= )` — просмотры  
- Флаги (`i`, `g`, `m`) — модификаторы поиска  
-------------------------------------------------------

Регулярное выражение `^(?:\+7|7|8)?(\d{10})$` написано на **универсальном синтаксисе регулярных выражений (RegEx)**, который поддерживается практически во всех современных языках программирования, включая:  

### **1. Языки, где этот шаблон будет работать**  
- **Python** (`re` модуль)  
- **JavaScript** (`RegExp`)  
- **PHP** (`preg_match`)  
- **Java** (`java.util.regex`)  
- **C#** (`System.Text.RegularExpressions`)  
- **Perl**  
- **Ruby**  
- **Go**  
- **Bash** (с `grep -E`, `sed`, `awk`)  

### **2. Особенности синтаксиса**  
- `^` и `$` — якоря для начала и конца строки.  
- `(?:...)` — **незахватывающая группа** (не создаёт отдельную группу в результатах).  
- `\+7` — экранированный `+` (так как `+` в RegEx означает «1 или более повторений»).  
- `\d{10}` — ровно 10 цифр.  

### **3. Примеры использования в разных языках**  

#### **Python**  
```python
import re

pattern = r'^(?:\+7|7|8)?(\d{10})$'
phone = "79123456789"
match = re.fullmatch(pattern, phone)

if match:
    print("Номер корректен:", match.group(1))  # 9123456789
else:
    print("Неверный формат")
```

#### **JavaScript**  
```javascript
const pattern = /^(?:\+7|7|8)?(\d{10})$/;
const phone = "89123456789";

if (pattern.test(phone)) {
    const cleanNumber = phone.replace(pattern, '$1');
    console.log("Номер без префикса:", cleanNumber); // 9123456789
}
```

#### **PHP**  
```php
$pattern = '/^(?:\+7|7|8)?(\d{10})$/';
$phone = "+79123456789";

if (preg_match($pattern, $phone, $matches)) {
    echo "Номер без префикса: " . $matches[1]; // 9123456789
}
```
---------------------------------------------------------------------------

Это регулярное выражение предназначено для поиска и проверки телефонных номеров, которые могут быть записаны в различных форматах, но в итоге содержат 7 цифр.  

### Разбор регулярного выражения:  
`^(?:\+3572|3572|003572|2)?(\d{7})$`  

1. **`^`** — начало строки.  
2. **`(?:\+3572|3572|003572|2)?`** — необязательная группа (из-за `?`), содержащая варианты префиксов:  
   - `\+3572` — номер начинается с `+3572` (международный формат для Кипра).  
   - `3572` — то же самое, но без `+`.  
   - `003572` — альтернативный международный формат (`00` вместо `+`).  
   - `2` — локальный формат (например, если номер записан как `2XXXXXXX`).  
3. **`(\d{7})`** — основная часть номера, состоящая ровно из 7 цифр (`\d` означает цифру).  
4. **`$`** — конец строки.  

### Как это работает?  
Регулярное выражение ищет номера, которые:  
- Могут начинаться с одного из префиксов (`+3572`, `3572`, `003572`, `2`), но это необязательно.  
- Обязательно содержат **7 цифр** после префикса (если он есть) или просто 7 цифр (если префикса нет).  

### Примеры совпадений:  
- `+35721234567` → `1234567` (извлекается часть в скобках).  
- `35729999999` → `9999999`.  
- `0035721111111` → `1111111`.  
- `23456789` → `3456789` (если префикс `2` считается частью номера).  
- `9876543` → `9876543` (если префикса нет, но 7 цифр есть).  

### Примеры НЕ-совпадений:  
- `+3571234567` (неправильный префикс).  
- `35712345678` (слишком много цифр).  
- `123456` (мало цифр).  
---------------------------------------------------------------------------

Отличный вопрос! **Regex101.com** — это мощный инструмент для тестирования и отладки регулярных выражений. Чтобы эффективно тренироваться, нужно правильно подбирать **тестовые строки** и анализировать результаты.  

### **Как тестировать себя на Regex101?**  
1. **Откройте [regex101.com](https://regex101.com/)**  
   - Выберите язык (PCRE, JavaScript, Python и др.).  
   - Вставьте своё регулярное выражение в поле **`Regular Expression`**.  

2. **Подготовьте тестовые строки**  
   - В поле **`Test String`** добавьте примеры, которые должны **совпадать** (✔) и **не совпадать** (✖) с вашим шаблоном.  

3. **Анализируйте результат**  
   - Совпадения подсвечиваются.  
   - Во вкладке **`Explanation`** можно увидеть пошаговый разбор.  



### **Пример тренировки**  
Допустим, вы учитесь писать регулярки для **телефонных номеров** в формате:  
- `+79161234567`  
- `89161234567`  
- `79161234567`  
- `9161234567`  

#### **Регулярное выражение:**  
```regex
^(\+7|8|7)?(\d{10})$
```  
#### **Тестовые строки:**  
```text
+79161234567  ✔  
89161234567   ✔  
79161234567   ✔  
9161234567    ✔  
+7916123456   ✖ (9 цифр вместо 10)  
9191234567    ✔ (но может быть ошибкой, если код должен быть 916)  
+39161234567  ✖ (неправильный код страны)  
```



### **Как составлять тестовые данные?**  
1. **Позитивные тесты (должны совпадать):**  
   - Стандартные валидные случаи.  
   - Граничные случаи (минимальная/максимальная длина).  

2. **Негативные тесты (не должны совпадать):**  
   - Неправильные форматы.  
   - Лишние символы.  
   - Слишком короткие/длинные строки.  



### **Примеры заданий для самопроверки**  
| Задача | Регулярка | Тестовые строки |
|--------|-----------|-----------------|
| **Найти даты `DD-MM-YYYY`** | `\b\d{2}-\d{2}-\d{4}\b` | `01-01-2020` ✔, `2020-01-01` ✖ |
| **Найти email** | `\b[\w.-]+@[\w.-]+\.\w{2,}\b` | `test@mail.com` ✔, `test@mail` ✖ |
| **Найти HEX-цвета** | `#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})\b` | `#ff00ff` ✔, `#zzz` ✖ |

-------------------------------------------------------------------------------------------------------

RF Mobile phones != 8|7|+7
<br/> **Мобильные номера РФ без 8|7|+7**
<br/> ` (?:8|7|\+7)(9\d{2}\d{7}) `

RF Mobile phones 7num
<br/>  **Мобильные номера РФ 7ном**
<br/> ` (?:8|7|\+7)\d{2}(\d{8}) `

Armenian City phones +374[**]
<br/> **Номера Армении +374 c кодом города**
<br/> ` (\+374)\d{0}(\d{8}) `

Armenian City phones +374 != [**]
<br/> **Номера Армении +374 без кода города**
<br/> ` (\+374\d{2})(\d{6}) `


