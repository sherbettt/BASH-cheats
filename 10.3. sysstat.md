# –ö–æ–º–∞–Ω–¥—ã sysstat - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è

## üìä **–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

### iostat - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏—Å–∫–æ–≤
```bash
# –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
iostat -xtz 2

# –¢–æ–ª—å–∫–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–∏—Å–∫–ª—é—á–∏—Ç—å loop)
iostat -x -p sda,sdb,nvme0n1,nvme1n1 2

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö
iostat -d -m 2

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π > 1 tps
iostat -x | awk 'NR<=3 || $2>1'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏
iostat -x 2 | awk 'NR<=3 || $14>10 {print}'
```

### mpstat - –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```bash
# –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º —è–¥—Ä–∞–º
mpstat -P ALL 1

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏
mpstat -I SUM 2

# CPU —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ —Ç–∏–ø–∞–º –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
mpstat -I CPU 2

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –º–µ–∂–¥—É —è–¥—Ä–∞–º–∏
mpstat -u -P ALL 2
```

## üîç **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**

### pidstat - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
pidstat -urd -h 2

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pidstat -C "java|ssh|systemd" -urd 2

# I/O —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤
pidstat -dl -t 2

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ç–æ–∫–æ–≤ (threads)
pidstat -t -u 2

# –ü–∞–º—è—Ç—å —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π
pidstat -r -s 2

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
pidstat -u -t -r -d 2 | awk '{user[$2]+=$4} END {for(u in user) print u, user[u]}'
```

## üìà **sar - –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∏ —Ä–µ–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑**

### –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
# –ê–Ω–∞–ª–∏–∑ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å
sar -f /var/log/sa/sa15 -s 10:00:00 -e 16:00:00

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
sar -q -f /var/log/sa/sa14 && echo "---" && sar -q -f /var/log/sa/sa15

# –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –∑–∞ –º–µ—Å—è—Ü
for day in {01..30}; do sar -f /var/log/sa/sa$day | tail -1; done
```

### –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã sar
```bash
# –ê–Ω–∞–ª–∏–∑ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
sar -u | awk '$3+$5 > 80 {print}'

# –ü–æ–∏—Å–∫ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã—Å–æ–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∏—Å–∫–∞
sar -d -p | awk 'NR>3 && $10>50 {print}'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π alert –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
sar -u 2 | awk 'NR>3 && $3+$5 > 90 {print "ALERT: High CPU at", $1; system("logger High CPU load")}'
```

## üéØ **–°–ª–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã**

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤–∞—è –ø–∞–Ω–µ–ª—å
```bash
watch -n 2 '
echo "=== CPU ==="
mpstat -P ALL 1 1 | tail -n +4
echo ""
echo "=== MEMORY ==="
free -h
echo ""
echo "=== DISK I/O ==="
iostat -x 1 1 | grep -E "(Device|nvme|sd)"
'
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
#!/bin/bash
# perf-monitor.sh

INTERVAL=2
COUNT=10

echo "Starting performance monitoring for ${COUNT} intervals..."
echo "======================================================"

# –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
mpstat -P ALL $INTERVAL $COUNT > cpu_stats.log &
iostat -x $INTERVAL $COUNT > disk_stats.log &
pidstat -urd $INTERVAL $COUNT > process_stats.log &

wait

# –ê–Ω–∞–ª–∏–∑
echo "CPU Summary:"
awk '/Average:/ && /all/ {print "CPU Idle:", $12"%"} /Average:/ && !/all/ {print "CPU"$3":", $12"%"}' cpu_stats.log

echo -e "\nDisk Summary:"
awk '/Device/ {header=$0} /nvme/ {print} END {print header}' disk_stats.log | tail -6
```

### –ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –≤—ã—Å–æ–∫–æ–π CPU –Ω–∞–≥—Ä—É–∑–∫–æ–π
pidstat -u 1 5 | awk 'NR>3 && $8 > 20 {print "High CPU:", $4, $8"%"}'

# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å –≤—ã—Å–æ–∫–∏–º I/O
pidstat -d 1 5 | awk 'NR>3 && $4 > 1000 {print "High I/O:", $4, $7" KB/s"}'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ–º
pidstat -u 2 | awk 'NR>3 && $8 > 90 {system("echo \"ALERT: Process " $4 " using " $8 "% CPU\" | mail -s \"High CPU Alert\" admin@example.com")}'
```

## üìä **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç—ã**

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
generate_perf_report() {
    echo "Performance Report for $(date)"
    echo "=============================="
    echo -e "\nCPU Usage:"
    sar -u | tail -5
    echo -e "\nMemory Usage:"
    sar -r | tail -5
    echo -e "\nDisk I/O:"
    iostat -x | grep -E "(nvme|sd)" | head -3
}
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å —Ü–≤–µ—Ç–∞–º–∏
```bash
watch -t -n 1 '
echo -e "\033[1;34m=== LIVE SYSTEM STATS ===\033[0m"
echo -e "\033[1;32mCPU:\033[0m"
mpstat 1 1 | tail -1 | awk "{printf \"User: %.1f%%, System: %.1f%%, Idle: %.1f%%\\n\", \$3, \$5, \$12}"
echo -e "\033[1;32mMemory:\033[0m"
free -h | awk "/Mem:/ {printf \"Used: %s/%s (%.1f%%)\\n\", \$3, \$2, \$3/\$2*100}"
echo -e "\033[1;32mTop Processes:\033[0m"
ps aux --sort=-%cpu | head -4
'
```

## üîß **–£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –ø–æ CPU
mpstat -I SCPU 2

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º—è–≥–∫–∏—Ö –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
mpstat -I SOFT 2

# –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
cat /proc/interrupts | awk '{for(i=2;i<=NF-3;i++) sum[i]+=$i} END {for(i=2;i<=NF-3;i++) print "CPU" i-2 ":", sum[i]}'
```

### –î–µ—Ç–∞–ª—å–Ω—ã–π I/O –∞–Ω–∞–ª–∏–∑
```bash
# –ê–Ω–∞–ª–∏–∑ –æ—á–µ—Ä–µ–¥–µ–π –¥–∏—Å–∫–æ–≤
iostat -x | awk 'NR>3 {print $1, $9, $10, $11}' | sort -k2 -nr

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ –¥–∏—Å–∫–∞
iostat -x 2 | awk 'NR>3 && $10 > 50 {print "High await:", $1, $10"ms"}'

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–∏—Å–∫–æ–≤
iostat -x -p nvme0n1,nvme1n1 2 | awk '/Device/ {print} /nvme/ {print}'
```

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≥–ª—É–±–æ–∫–∏–π insight –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
