## üìù **–ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ NVMe –î–ò–°–ö–ê –î–õ–Ø DEBIAN-BASED –î–ò–°–¢–†–ò–ë–£–¢–ò–í–û–í**

### **1. –ü–û–î–ì–û–¢–û–í–ö–ê:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã
sudo apt update
sudo apt install nvme-cli smartmontools hdparm fio sysstat -y
```

### **2. –ë–ê–ó–û–í–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (–¥–µ–ª–∞—Ç—å —Ä–∞–∑ –≤ –º–µ—Å—è—Ü):**
```bash
# 1. SMART —Å—Ç–∞—Ç—É—Å (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ)
sudo smartctl -H /dev/nvme0

# 2. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∏ –∏–∑–Ω–æ—Å
sudo smartctl -A /dev/nvme0 | grep -E "(Temperature|Available_Spare|Percentage_Used|Power_On_Hours)"

# 3. –ö–æ—Ä–æ—Ç–∫–∏–π —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞
sudo smartctl -t short /dev/nvme0
# –ß–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
sudo smartctl -l selftest /dev/nvme0
```

### **3. –¢–ï–°–¢–´ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò (—Ä–∞–∑ –≤ 3 –º–µ—Å—è—Ü–∞ –∏–ª–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö):**

#### **A. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å (–≤–∞—à —Ç–µ—Å—Ç —Ö–æ—Ä–æ—à):**
```bash
# –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±—É—Ñ–µ—Ä)
dd if=/dev/zero of=/tmp/test.img bs=1G count=1 oflag=dsync

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
echo 3 | sudo tee /proc/sys/vm/drop_caches

# –¢–µ—Å—Ç —á—Ç–µ–Ω–∏—è
dd if=/tmp/test.img of=/dev/null bs=8k
# –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –ø–æ—Å–ª–µ
rm /tmp/test.img
```

#### **B. –°–ª—É—á–∞–π–Ω–æ–µ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å (–±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ç–µ—Å—Ç):**
```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª 1GB
sudo fio --name=test --filename=/tmp/fio_test --size=1G --ioengine=libaio

# –¢–µ—Å—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è (4KB –±–ª–æ–∫–∏, –≥–ª—É–±–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏ 256)
sudo fio --name=randread --filename=/tmp/fio_test \
  --rw=randread --bs=4k --iodepth=256 \
  --runtime=60 --time_based --group_reporting \
  --numjobs=4 --ioengine=libaio --direct=1

# –¢–µ—Å—Ç —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–ø–∏—Å–∏ (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ - –Ω–µ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ!)
sudo fio --name=randwrite --filename=/tmp/fio_test \
  --rw=randwrite --bs=4k --iodepth=256 \
  --runtime=60 --time_based --group_reporting \
  --numjobs=4 --ioengine=libaio --direct=1
```

#### **C. –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç fio:**
```bash
cat > /tmp/nvme-test.fio << 'EOF'
[global]
ioengine=libaio
direct=1
runtime=30
time_based
group_reporting
size=1G
filename=/tmp/test-file

[seq-read]
bs=1M
rw=read
iodepth=32

[seq-write]
bs=1M
rw=write
iodepth=32

[rand-read]
bs=4k
rw=randread
iodepth=256
numjobs=4

[rand-write]
bs=4k
rw=randwrite
iodepth=256
numjobs=4
EOF

sudo fio /tmp/nvme-test.fio
```

### **4. –ú–û–ù–ò–¢–û–†–ò–ù–ì –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò:**
```bash
# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
watch -n 2 "cat /sys/class/nvme/nvme0/device/device/temp1_input 2>/dev/null | awk '{print \$1/1000\"¬∞C\"}'"

# –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫
iostat -dx /dev/nvme0 2 5

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é nvme-cli
sudo nvme list
sudo nvme smart-log /dev/nvme0
```

### **5. –ü–†–û–§–ò–õ–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ú–ï–†–´:**
1. **–†–∞–∑ –≤ 6 –º–µ—Å—è—Ü–µ–≤:** –î–ª–∏–Ω–Ω—ã–π —Ç–µ—Å—Ç SMART
   ```bash
   sudo smartctl -t long /dev/nvme0
   # –ó–∞–π–º–µ—Ç 1-3 —á–∞—Å–∞, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ –Ω–æ—á—å
   ```

2. **–ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã:** –ï—Å–ª–∏ —á–∞—Å—Ç–æ >60¬∞C, —É–ª—É—á—à–∏—Ç—å –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ

3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ "Percentage Used" >80% –∑–∞–¥—É–º–∞—Ç—å—Å—è –æ –∑–∞–º–µ–Ω–µ



### **–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
1. **–í fio –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å `--size=`**:
   ```bash
   # –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞:
   sudo fio --filename=/tmp/test.file --size=1G --direct=1 --rw=randread \
     --bs=4k --ioengine=libaio --iodepth=256 --runtime=30 \
     --numjobs=4 --time_based --group_reporting --name=test
   ```

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ**, –∞ –Ω–µ –Ω–∞ raw —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (–±–µ–∑–æ–ø–∞—Å–Ω–µ–µ)

3. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ (latency):**
   ```bash
   sudo fio --name=latency-test --filename=/tmp/test.file --size=1G \
     --rw=randread --bs=4k --iodepth=1 --runtime=30 \
     --ioengine=libaio --direct=1 --group_reporting \
     --output-format=json --lat_percentiles=1
   ```

## üìà **–ù–û–†–ú–´ –î–õ–Ø –í–ê–®–ï–ì–û –î–ò–°–ö–ê KIOXIA KBG50ZNV512G:**
- **–û–∂–∏–¥–∞–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å:** 1.5-2.0 GB/s —á—Ç–µ–Ω–∏–µ, 1.0-1.5 GB/s –∑–∞–ø–∏—Å—å
- **–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:** 5.2 GB/s —á—Ç–µ–Ω–∏–µ, 1.0 GB/s –∑–∞–ø–∏—Å—å (—á—Ç–µ–Ω–∏–µ –≤—ã—à–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ!)
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:** 82¬∞C
- **–ò–∑–Ω–æ—Å:** –†–µ—Å—É—Ä—Å ~300TBW, —É –≤–∞—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ 5.4TB

## üö® **–¢–†–ï–í–û–ñ–ù–´–ï –°–ò–ì–ù–ê–õ–´ (—á–µ–≥–æ —Å—Ç–æ–∏—Ç –±–æ—è—Ç—å—Å—è):**
1. `Available Spare` < 10%
2. `Percentage Used` > 90%
3. `Temperature` > 75¬∞C –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
4. –ü–æ—è–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ `Error Information Log`
5. –ü–∞–¥–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 50%

## üìã **–ß–ï–ö-–õ–ò–°–¢ –ï–ñ–ï–ú–ï–°–Ø–ß–ù–û–ô –ü–†–û–í–ï–†–ö–ò:**
```bash
#!/bin/bash
echo "=== Monthly NVMe Check ==="
echo "1. Health: $(sudo smartctl -H /dev/nvme0 | grep -o 'PASSED\|FAILED')"
echo "2. Temperature: $(sudo smartctl -A /dev/nvme0 | grep Temperature | head -1 | awk '{print $2}')¬∞C"
echo "3. Wear: $(sudo smartctl -A /dev/nvme0 | grep Percentage_Used | awk '{print $3}')%"
echo "4. Spare: $(sudo smartctl -A /dev/nvme0 | grep Available_Spare | awk '{print $3}')%"
echo "5. Errors: $(sudo smartctl -l error /dev/nvme0 | grep -c 'Error Information')"
```
---------------------------------------------
<br/>



# üìù **–ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ NVMe –î–ò–°–ö–ê –î–õ–Ø ARCH-BASED –î–ò–°–¢–†–ò–ë–£–¢–ò–í–û–í**
(Manjaro, EndeavourOS, CachyOS, Arch Linux)

## üìä **–ê–ù–ê–õ–ò–ó –í–ê–®–ò–• –†–ï–ó–£–õ–¨–¢–ê–¢–û–í:**
*(–í–∞—à –¥–∏—Å–∫ KIOXIA KBG50ZNV512G –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏!)*

### ‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∏—Å–∫–∞:**
- **–ó–¥–æ—Ä–æ–≤—å–µ:** `PASSED` ‚úÖ
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:** 35¬∞C (–∏–¥–µ–∞–ª—å–Ω–æ)
- **–ò–∑–Ω–æ—Å:** –≤—Å–µ–≥–æ 1% (5.4TB –∑–∞–ø–∏—Å–∞–Ω–æ –∏–∑ ~300TB —Ä–µ—Å—É—Ä—Å–∞)
- **–ó–∞–ø–∞—Å–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞:** 100%
- **–û—à–∏–±–∫–∏:** 0
- **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤—ã–∫–ª—é—á–µ–Ω–∏—è:** 29 (–Ω–æ—Ä–º–∞ –¥–ª—è –Ω–æ—É—Ç–±—É–∫–∞)

### üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–ó–∞–ø–∏—Å—å:** 1.0 GB/s (—Ö–æ—Ä–æ—à–æ –¥–ª—è PCIe 3.0)
- **–ß—Ç–µ–Ω–∏–µ:** 5.2 GB/s (–æ—Ç–ª–∏—á–Ω–æ!)

---

## üîß **–£–°–¢–ê–ù–û–í–ö–ê –£–¢–ò–õ–ò–¢ –î–õ–Ø ARCH-BASED –°–ò–°–¢–ï–ú:**

### **–û—Å–Ω–æ–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
sudo pacman -Syu

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
sudo pacman -S smartctl nvme-cli hdparm fio sysstat dmidecode
```

### **–î–ª—è CachyOS (–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):**
```bash
# CachyOS –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —è–¥—Ä–∞
sudo pacman -S linux-cachyos  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
sudo pacman -S smartmontools nvme-cli
```

### **AUR-—É—Ç–∏–ª–∏—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```bash
# –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ AUR
yay -S crystaldiskinfo-git  # GUI –¥–ª—è SMART
yay -S gsmartcontrol         # –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π SMART
yay -S disk-benchmark        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
```

---

## üìã **–ü–û–õ–ù–´–ô –ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:**

### **1. –ë–ê–ó–û–í–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (–µ–∂–µ–º–µ—Å—è—á–Ω–æ):**

#### **A. –ü—Ä–æ–≤–µ—Ä–∫–∞ SMART (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!):**
```bash
# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
sudo smartctl -x /dev/nvme0

# –ö—Ä–∞—Ç–∫–∏–π —Å—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è
sudo smartctl -H /dev/nvme0

# –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
sudo smartctl -A /dev/nvme0 | grep -E "(Temperature|Available_Spare|Percentage_Used|Data_Units|Power_On|Media.*Error)"

# –¢–æ–ª—å–∫–æ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–±—ã—Å—Ç—Ä–æ)
sudo smartctl -A /dev/nvme0 | grep "Temperature:"

# –õ–æ–≥ –æ—à–∏–±–æ–∫
sudo smartctl -l error /dev/nvme0
```

#### **B. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PCIe
lspci -vv | grep -i nvme

# –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —à–∏–Ω—ã
sudo lspci -vv -s $(lspci | grep -i nvme | cut -d' ' -f1) | grep -i width

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–æ—É—Ç–±—É–∫–µ
sudo dmidecode -t system

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫–æ–ª–µ–Ω–∏–µ PCIe
sudo nvme id-ctrl /dev/nvme0 | grep "NVMe Version"
```

### **2. –¢–ï–°–¢–´ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò (—Ä–∞–∑ –≤ 3 –º–µ—Å—è—Ü–∞):**

#### **A. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (dd):**
```bash
# –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ (5GB, —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π)
dd if=/dev/zero of=/tmp/test.img bs=256M count=20 oflag=dsync status=progress

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π
sudo sync && echo 3 | sudo tee /proc/sys/vm/drop_caches

# –¢–µ—Å—Ç —á—Ç–µ–Ω–∏—è
dd if=/tmp/test.img of=/dev/null bs=8k status=progress

# –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
rm /tmp/test.img
```

#### **B. –°–ª—É—á–∞–π–Ω—ã–π –¥–æ—Å—Ç—É–ø (fio - —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —Ç–µ—Å—Ç):**
```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª 4GB (—É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –µ—Å—Ç—å –º–µ—Å—Ç–æ)
sudo fio --name=prepare --filename=/tmp/fio_test.bin --size=4G --ioengine=libaio

# –¢–µ—Å—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è (4K, –≥–ª—É–±–∏–Ω–∞ 256)
sudo fio --name=randread --filename=/tmp/fio_test.bin \
  --rw=randread --bs=4k --iodepth=256 --runtime=60 \
  --time_based --group_reporting --numjobs=4 \
  --ioengine=libaio --direct=1 --output=randread_results.txt

# –¢–µ—Å—Ç —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–ø–∏—Å–∏
sudo fio --name=randwrite --filename=/tmp/fio_test.bin \
  --rw=randwrite --bs=4k --iodepth=256 --runtime=60 \
  --time_based --group_reporting --numjobs=4 \
  --ioengine=libaio --direct=1 --output=randwrite_results.txt

# –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
sudo rm /tmp/fio_test.bin
```

#### **C. –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ—Ç—á–µ—Ç–æ–º:**
```bash
#!/bin/bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ nvme-benchmark.sh
echo "=== NVMe Benchmark for Arch Linux ==="
echo "Model: $(sudo smartctl -i /dev/nvme0 | grep "Model Number" | cut -d':' -f2)"
echo "Starting at: $(date)"
echo ""

# 1. SMART status
echo "1. SMART Health Check:"
sudo smartctl -H /dev/nvme0 | grep "SMART overall-health"

# 2. Temperature before test
TEMP_BEFORE=$(sudo smartctl -A /dev/nvme0 | grep "Temperature:" | head -1 | awk '{print $2}')
echo "2. Temperature before: ${TEMP_BEFORE}¬∞C"

# 3. Sequential test
echo "3. Sequential Write Test:"
dd if=/dev/zero of=/tmp/seqtest.tmp bs=1G count=2 oflag=dsync 2>&1 | tail -1

sync && echo 3 | sudo tee /proc/sys/vm/drop_caches > /dev/null
echo "4. Sequential Read Test:"
dd if=/tmp/seqtest.tmp of=/dev/null bs=8k 2>&1 | tail -1
rm /tmp/seqtest.tmp

# 4. FIO config
cat > /tmp/fio_quick.ini << EOF
[global]
ioengine=libaio
direct=1
runtime=30
time_based
group_reporting
filename=/tmp/fio_quick.bin
size=2G

[seq-read]
bs=1M
rw=read
iodepth=32

[seq-write]
bs=1M
rw=write
iodepth=32

[rand-read]
bs=4k
rw=randread
iodepth=256
numjobs=4

[rand-write]
bs=4k
rw=randwrite
iodepth=256
numjobs=4
EOF

# 5. Run FIO
echo "5. Running FIO comprehensive test..."
sudo fio /tmp/fio_quick.ini --output=/tmp/fio_results.txt

# 6. Temperature after test
TEMP_AFTER=$(sudo smartctl -A /dev/nvme0 | grep "Temperature:" | head -1 | awk '{print $2}')
echo "6. Temperature after: ${TEMP_AFTER}¬∞C"
echo "7. Temperature delta: $((TEMP_AFTER - TEMP_BEFORE))¬∞C"

# Cleanup
sudo rm -f /tmp/fio_quick.bin /tmp/fio_quick.ini
echo "Benchmark completed at: $(date)"
```

### **3. –°–ê–ú–û–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê SMART:**
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
sudo smartctl -t short /dev/nvme0    # –ö–æ—Ä–æ—Ç–∫–∏–π (2-10 –º–∏–Ω—É—Ç)
sudo smartctl -t long /dev/nvme0     # –î–ª–∏–Ω–Ω—ã–π (–Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
sudo smartctl -c /dev/nvme0

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
sudo smartctl -l selftest /dev/nvme0
```

### **4. –ú–û–ù–ò–¢–û–†–ò–ù–ì –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò:**
```bash
# –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (–∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã)
watch -n 2 "echo '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ' \$(cat /sys/class/nvme/nvme0/device/device/temp1_input 2>/dev/null | awk '{print \$1/1000}')¬∞C"

# –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫
sudo iostat -dxm /dev/nvme0 1 5

# –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–µ—Å–ª–∏ –µ—Å—Ç—å GUI)
sudo pacman -S glances
sudo glances

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é nvme-cli
sudo nvme monitor /dev/nvme0
```

---

## üéØ **–ê–†–•-–°–ü–ï–¶–ò–§–ò–ß–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò:**

### **–î–ª—è Manjaro:**
```bash
# Manjaro —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç BTRFS - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—é
sudo btrfs filesystem defragment -r /  # –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–º —Ä–∞–∑–¥–µ–ª–µ!

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ —è–¥—Ä–æ
uname -r
sudo mhwd-kernel -l  # —Å–ø–∏—Å–æ–∫ —è–¥–µ—Ä
```

### **–î–ª—è EndeavourOS:**
```bash
# EndeavourOS —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç XFS/BTRFS
sudo xfs_info /  # –µ—Å–ª–∏ XFS

# –ü—Ä–æ–≤–µ—Ä–∫–∞ TRIM (–≤–∞–∂–Ω–æ –¥–ª—è NVMe)
sudo systemctl status fstrim.timer
sudo journalctl -u fstrim.timer
```

### **–î–ª—è CachyOS:**
```bash
# CachyOS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —è–¥—Ä–∞
cat /proc/sys/vm/swappiness  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 10 –¥–ª—è SSD
sudo sysctl vm.swappiness=10

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ scheduler
cat /sys/block/nvme0n1/queue/scheduler
# –î–ª—è NVMe –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'none' –∏–ª–∏ 'mq-deadline'
```

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö Arch-based:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å TRIM
sudo systemctl enable --now fstrim.timer

# 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∂—É—Ä–Ω–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
# –î–ª—è systemd-journald
sudo mkdir -p /etc/systemd/journald.conf.d/
echo -e "[Journal]\nStorage=volatile" | sudo tee /etc/systemd/journald.conf.d/ssd.conf

# 3. –û—Ç–∫–ª—é—á–∏—Ç—å atime (—É–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–ø–∏—Å—å)
sudo sed -i 's/relatime/noatime/' /etc/fstab
sudo mount -o remount /

# 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ scheduler
echo "none" | sudo tee /sys/block/nvme0n1/queue/scheduler
```

---

## üö® **–¢–†–ï–í–û–ñ–ù–´–ï –ü–†–ò–ó–ù–ê–ö–ò:**

### **–°–†–û–ß–ù–û –ü–†–ò–ù–Ø–¢–¨ –ú–ï–†–´ –ï–°–õ–ò:**
```bash
# 1. –ó–¥–æ—Ä–æ–≤—å–µ FAILED
sudo smartctl -H /dev/nvme0 | grep -q "FAILED" && echo "–°–†–û–ß–ù–û: SMART FAILED!"

# 2. –ó–∞–ø–∞—Å–Ω—ã–µ —Å–µ–∫—Ç–æ—Ä–∞ < 10%
AVAILABLE_SPARE=$(sudo smartctl -A /dev/nvme0 | grep "Available Spare" | awk '{print $3}')
[ "$AVAILABLE_SPARE" -lt 10 ] && echo "–°–†–û–ß–ù–û: Available Spare < 10%"

# 3. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ > 75¬∞C
TEMP=$(sudo smartctl -A /dev/nvme0 | grep "Temperature:" | awk '{print $2}')
[ "$TEMP" -gt 75 ] && echo "–í–ù–ò–ú–ê–ù–ò–ï: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ $TEMP¬∞C"

# 4. –ò–∑–Ω–æ—Å > 80%
USED=$(sudo smartctl -A /dev/nvme0 | grep "Percentage Used" | awk '{print $3}' | sed 's/%//')
[ "$USED" -gt 80 ] && echo "–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –∑–∞–º–µ–Ω—É: –∏–∑–Ω–æ—Å $USED%"
```

---

## üìà **–ê–í–¢–û–ú–ê–¢–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì:**

### **–°–∫—Ä–∏–ø—Ç –¥–ª—è systemd timer (–µ–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞):**
```bash
# /usr/local/bin/nvme-check.sh
#!/bin/bash
LOG="/var/log/nvme-health.log"
DEVICE="/dev/nvme0"

{
    echo "=== NVMe Health Check $(date) ==="
    echo "Model: $(sudo smartctl -i $DEVICE | grep "Model Number" | cut -d':' -f2)"
    echo "Health: $(sudo smartctl -H $DEVICE | grep -o 'PASSED\|FAILED')"
    echo "Temperature: $(sudo smartctl -A $DEVICE | grep "Temperature:" | awk '{print $2}')¬∞C"
    echo "Available Spare: $(sudo smartctl -A $DEVICE | grep "Available Spare" | awk '{print $3}')%"
    echo "Percentage Used: $(sudo smartctl -A $DEVICE | grep "Percentage Used" | awk '{print $3}')"
    echo ""
} | tee -a "$LOG"

# –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
if ! sudo smartctl -H $DEVICE | grep -q "PASSED"; then
    notify-send "NVMe Health ALERT" "SMART check FAILED!" -u critical
fi
```

### **Systemd service –∏ timer:**
```bash
# /etc/systemd/system/nvme-check.service
[Unit]
Description=NVMe Health Check

[Service]
Type=oneshot
ExecStart=/usr/local/bin/nvme-check.sh

# /etc/systemd/system/nvme-check.timer
[Unit]
Description=Monthly NVMe health check

[Timer]
OnCalendar=monthly
Persistent=true

[Install]
WantedBy=timers.target

# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
sudo systemctl enable --now nvme-check.timer
```

---

## üõ† **–†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú:**

### **–ï—Å–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ø–∞–ª–∞:**
```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
df -h /

# 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
sudo sync && echo 3 | sudo tee /proc/sys/vm/drop_caches

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ TRIM
sudo fstrim -v /

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ
sensors

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –≤–∫–ª—é—á–µ–Ω –ª–∏ power saving
cat /sys/class/nvme/nvme0/device/power/control
echo "performance" | sudo tee /sys/class/nvme/nvme0/device/power/control
```

### **–ï—Å–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤—ã—Å–æ–∫–∞—è (>70¬∞C):**
```bash
# 1. –£–ª—É—á—à–∏—Ç–µ –≤–µ–Ω—Ç–∏–ª—è—Ü–∏—é –Ω–æ—É—Ç–±—É–∫–∞
# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Å—Ç—É –∏ –ø—ã–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ
# 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ TLP –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏–µ–º
sudo pacman -S tlp tlp-rdw
sudo systemctl enable --now tlp

# 4. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É
sudo pacman -S powertop
sudo powertop --auto-tune
```

---

## ‚úÖ **–í–´–í–û–î –ü–û –í–ê–®–ï–ú–£ –î–ò–°–ö–£:**

–í–∞—à **KIOXIA KBG50ZNV512G** –≤ **–∏–¥–µ–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏**:
- ‚úÖ SMART: PASSED
- ‚úÖ –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 35¬∞C (–æ—Ç–ª–∏—á–Ω–æ)
- ‚úÖ –ò–∑–Ω–æ—Å: –≤—Å–µ–≥–æ 1%
- ‚úÖ –û—à–∏–±–∫–∏: 0
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤—ã—à–µ –æ–∂–∏–¥–∞–µ–º–æ–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Arch-based —Å–∏—Å—Ç–µ–º:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `smartmontools`, `nvme-cli`, `fio`
2. –†–∞–∑ –≤ –º–µ—Å—è—Ü: `sudo smartctl -H /dev/nvme0`
3. –†–∞–∑ –≤ 6 –º–µ—Å—è—Ü–µ–≤: –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç fio
4. –í–∫–ª—é—á–∏—Ç–µ `fstrim.timer`
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ noatime –≤ fstab
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ TLP –¥–ª—è –Ω–æ—É—Ç–±—É–∫–∞

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –≤–∞—Å:**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —É—Ç–∏–ª–∏—Ç—ã
sudo pacman -S smartmontools nvme-cli fio

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
sudo fio --name=test --filename=/tmp/test.bin --size=2G \
  --rw=randread --bs=4k --iodepth=256 --runtime=30 \
  --ioengine=libaio --direct=1 --group_reporting --numjobs=4

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
sudo systemctl enable --now fstrim.timer
```

