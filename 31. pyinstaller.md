С учётом того, что устанавливаем на Ubuntu подобные машины. 
<br/> в свете последних событий (на момент ред. 19 Января 2026) чтобы прочитать доку, нужно включить VPN.
<br/> Читай документацию [How to Install PyInstaller](https://pyinstaller.org/en/stable/installation.html)
<br/> Читай Man Pages -> [man pyinstaller](https://pyinstaller.org/en/stable/man/pyinstaller.html)
<br/> Читай Man Pages -> [man pyi-makespec](https://pyinstaller.org/en/stable/man/pyi-makespec.html)
<br/> [Installing Packages](https://packaging.python.org/en/latest/tutorials/installing-packages/)

## Общие сведения

### 1. Использовать `pipx` (рекомендуемый способ для приложений)
```bash
sudo apt install pipx;
pipx install pyinstaller;
pipx ensurepath;
pipx completions;
source ~/.bashrc;
```

### 2. Создать виртуальное окружение
```bash
python3 -m venv myenv
source myenv/bin/activate
pip install pyinstaller
```

### 3. Установить через системный менеджер пакетов
```bash
sudo apt install python3-pyinstaller
```

### 4. Принудительная установка (не рекомендуется)
Если вы уверены в своих действиях, можно обойти защиту:
```bash
pip install --break-system-packages pyinstaller
```
-----------------------------------------------------
<br/>


## Сборка PIPX

Для теста компиляции можно использовать тестовый репо [fibonacci_dict](https://github.com/sherbettt/DZ_DictList/tree/main)

### Решение:
1. **Попробуйте полный путь к pyinstaller**:
   ```bash
   ~/.local/bin/pyinstaller Fibonacci_number_var1.py
   ```

2. **Либо перезапустите терминал** - просто закройте и откройте его снова, затем попробуйте снова:
   ```bash
   pyinstaller Fibonacci_number_var1.py
   ```

3. **Если всё ещё не работает**, проверьте, куда pipx установил pyinstaller:
   ```bash
   pipx list
   ```
   И попробуйте запустить через полный путь, который покажет эта команда.
<br/>   


Читай документацию [Using PyInstaller](https://pyinstaller.org/en/stable/usage.html)

Чтобы скомпилировать `Fibonacci_number_var1.py` в **один исполняемый файл**, который можно перенести на другой сервер и запустить без зависимостей, используйте `pyinstaller` с параметром `--onefile`.  

### 1. **Компиляция в один файл**  
Выполните команду:  
```bash
pyinstaller --clean --onefile Fibonacci_number_var1.py
```
(Если `pyinstaller` не найден, используйте полный путь: `~/.local/bin/pyinstaller` или `pipx run pyinstaller`)

#### Что делает `--onefile`?
- Собирает **все зависимости** внутрь одного `.exe` (Windows) или безымянного бинарника (Linux).
- Удобно для переноса, но запуск может быть немного медленнее (так как файлы распаковываются во временную папку при старте).
#### Что делает `--clean`?
- Очищает кэш PyInstaller и удаляет временные файлы перед сборкой.


### 2. **Где найти готовый файл?**  
После компиляции в папке `dist/` появится бинарник:  
```bash
ls dist/
Fibonacci_number_var1  # (Linux)
Fibonacci_number_var1.exe  # (Windows)
```
Это и есть **переносимый исполняемый файл**.


### 3. **Перенос на другой сервер и запуск**  
#### Для Linux:
```bash
# Копируем на другой сервер (например, через scp)
scp dist/Fibonacci_number_var1 user@remote-server:/path/to/destination/

# На удалённом сервере даём права на выполнение и запускаем
chmod +x Fibonacci_number_var1
./Fibonacci_number_var1
```

#### Для Windows:
Просто скопируйте `.exe`-файл и запустите его двойным кликом.


### 4. **Дополнительные настройки (опционально)**  
- **Изменить имя выходного файла**:  
  ```bash
  pyinstaller --onefile --name=my_app Fibonacci_number_var1.py
  ```
  → создаст `dist/my_app`.

- **Скрыть консоль (для GUI-приложений, Windows)**:  
  ```bash
  pyinstaller --onefile --noconsole Fibonacci_number_var1.py
  ```

- **Добавить иконку (только Windows)**:  
  ```bash
  pyinstaller --onefile --icon=myicon.ico Fibonacci_number_var1.py
  ```


### 5. **Проверка на целевом сервере**  
Если при запуске на другом сервере возникает ошибка (например, `GLIBC not found`), значит, сервер использует другую версию ОС. В этом случае:  
1. Компилируйте **на сервере с такой же ОС**, или  
2. Используйте Docker для сборки под нужную систему.  


### Итог  
 берите файл из `dist/` и переносите куда нужно. 
 
----------------------------
<br/>


## Виртуальное окружение

###  **Создание виртуального окружения**

```bash
# Создать виртуальное окружение в текущей директории
python3 -m venv .venv

# Или с указанием пути
python3 -m venv /path/to/venv

# Создать с системными пакетами (если нужно)
python3 -m venv .venv --system-site-packages
```

###  **Активация виртуального окружения**

```bash
# Linux/Mac
source .venv/bin/activate

# Или если venv в другом месте
source /path/to/venv/bin/activate

# Windows (cmd)
.venv\Scripts\activate.bat

# Windows (PowerShell)
.venv\Scripts\Activate.ps1
```

**После активации вы увидите в командной строке:**
```
(.venv) user@host:~$
```
Это значит, что вы внутри виртуального окружения!

###  **Работа внутри виртуального окружения**

```bash
# 1. Проверить что вы в venv
which python
which pip
# Должны показывать пути внутри .venv/

# 2. Установить пакеты (только в это окружение)
pip install pyinstaller
pip install requests pandas numpy  # и т.д.

# 3. Проверить установленные пакеты
pip list
pip freeze > requirements.txt  # сохранить зависимости

# 4. Запускать скрипты
python ваш_скрипт.py

# 5. Удалить пакеты
pip uninstall имя_пакета
```

###  **Выход из виртуального окружения**

```bash
# Просто выполните
deactivate

# После этого приглашение командной строки вернется к обычному
user@host:~$
```

###  **Управление окружениями**

```bash
# Показать текущее активное окружение
echo $VIRTUAL_ENV

# Создать несколько окружений для разных проектов
python3 -m venv ~/venv/project1
python3 -m venv ~/venv/project2

# Удалить виртуальное окружение (просто удалите папку)
rm -rf .venv
```

###  **Пример рабочего цикла**

```bash
# 1. Зайти в проект
cd ~/projects/myapp

# 2. Создать окружение (если первый раз)
python3 -m venv .venv

# 3. Активировать
source .venv/bin/activate

# 4. Установить зависимости
pip install -r requirements.txt
pip install pyinstaller

# 5. Работать...
pyinstaller --onefile app.py
python test.py

# 6. Сохранить зависимости
pip freeze > requirements.txt

# 7. Выйти когда закончили
deactivate
```

###  **Docker-совместимый способ (если нужен)**

```bash
# В Dockerfile или для изоляции
python3 -m venv /opt/venv
# Активировать в скрипте
#!/bin/bash
source /opt/venv/bin/activate
# ... ваш код ...
```

###  **Полезные алиасы для .bashrc или .zshrc**

```bash
# Добавьте в ~/.bashrc
alias venv-create='python3 -m venv .venv'
alias venv-activate='source .venv/bin/activate'
alias venv-deactivate='deactivate'
alias venv-list='ls -la ~/venv/'

# После добавления
source ~/.bashrc
```

###  **Для вашего случая с PyInstaller**

```bash
# 1. Перейти в проект
cd ~/git/runtel_opensips_sbc

# 2. Создать окружение
python3 -m venv .venv

# 3. Активировать
source .venv/bin/activate

# 4. Установить pyinstaller
pip install pyinstaller

# 5. Собрать ваше приложение
pyinstaller --onefile ваш_скрипт.py

# 6. Выйти
deactivate
```

###  **Как проверить что вы в виртуальном окружении?**

```bash
# Способ 1: Посмотреть путь к python
which python
# В venv: /path/to/project/.venv/bin/python
# Вне venv: /usr/bin/python

# Способ 2: Проверить переменную окружения
echo $VIRTUAL_ENV
# В venv: /path/to/project/.venv
# Вне venv: пусто

# Способ 3: Посмотреть приглашение командной строки
# В venv: (.venv) user@host:~$
# Вне venv: user@host:~$
```

**Важно:** Все установленные в виртуальном окружении пакеты доступны только когда оно активировано!

----------------------------
<br/>






