# § Пользователи

## Общее
<br/>Список пользователей посмотреть в файле */etc/passwd*
<br/>или командой: ```getent passwd```
<br/>Пароли хранятся в виде хешей в */etc/shadow*
<br/>Проверить существование пользователя: ```id <username>```
<br/>-----------------------------------------------------

## Добавление:
1) ```useradd <имя пользователя> [опции]```
-	-p - Задает пароль [useradd kiko0217 -p pass]
-	-c - Создает комментарий для описания учетной записи [useradd kiko0217 -c "Пользователя для управления системой"]
-	-m - При создании пользователя создать домашний каталог [useradd kiko0217 -m]
-	-b - Задает базовый каталог для домашнего каталога [useradd kiko0217 -b /var/home]
-	-d - Полный путь к домашнему каталогу пользователя [useradd kiko0217 -d /home/dmosk]
-	-s - Путь до оболочки командной строки [useradd kiko0217 -s /bin/csh]
-	-U - Имя группы будет таким же, как у пользователя
-	-G - Задает дополнительные группы
-	-g - Задает основную группу [useradd kiko0217 -g altternativegroup]
2) ```usermod -a -G <группы через запятую> <пользователь>```

## Редактирование:
1) Изменить имя пользователя:
<br/>	``sudo usermod --login new_username username``
2) Изменить UID:
<br/>	`sudo usermod --uid id username`
3) Изменить оболочку:
<br/>	`sudo usermod --shell path/to/shell username`
4) Изменить домашнюю папку:
<br/>	`sudo usermod --move-home --home path/to/new_home username`
5) Добавить доп. группы:
<br/>	`sudo usermod --append --groups group1,group2,... username`
6) passwd - смена для текущего пользователя
<br/> `passwd <имя пользователя> - конкретного`
7) mkpasswd -m sha-512 - генерация хэша пароля

## Удаление:
**Конфиги лежат в /etc/deluser.conf**
1) `userdel [список_опций] <имя_пользователя>`
-	-f, --force - Принудительно удаляет пользователя, даже если у него есть запущенные процессы.
-	-r, --remove - Удаляет домашнюю директорию учетной записи и все связанные с ней файлы.
-	-Z, --selinux-user - Удаляет только SELinux-объекты, связанные с учетной записью.
2) `deluser [список_опций] <имя_пользователя>`
-	--remove-all-files - Удаляет все файлы учетной записи, включая домашнюю директорию.
-	--remove-all-groups - Удаляет учетную запись из всех групп.
3) удаление из группы
<br/>	`gpasswd --delete <пользователь> <группы через запятую>`
<br/>-----------------------------------------------------

# § Группы
1) `groupadd <группа> [опции]` - добавление
2) `groupmod <группа> [опции]` - редактирование
3) `groupdel <группа> [опции]` - удаление
<br/>-----------------------------------------------------

# Примеры
-	`sudo useradd napo0721 -G wheel -m` - Создать учетную запись с возможностью получения привилегий суперпользователя (командой sudo su), для *CentOS*;
-	`sudo useradd napo0721 -G sudo -m` - для *DEB*.
-	`useradd dmosk -u 900 -g 950` - Создать пользователя с определенными UID и GID (соответственно идентификаторы пользователя и группы);
<br/> группа с используемым идентификатором (в данном примере 950) уже **должна быть *заранее* создана** с использованием команды groupadd
-	`useradd kiko0217 -d /home/new_kiko0217` - Создать пользователя *kiko0217* и указать путь к домашней директории
-	`useradd kiko0217 -s /sbin/nologin` - Создать учетную запись для пользователя *kiko0217* без возможности входа в систему
-	`chage -d 0 kiko0217` - Потребовать сменить пароль при следующем входе в систему
-	`chage -l kiko0217` - смотреть дату окончанию учётки
-	`chage -E -1 kiko0217` - бессрочная учётка
-	`usermod kiko0217 -g thenewgroup` - Поменять пользователю *kiko0217* основную группу
-	`usermod kiko0217 -G sudo` - Задать пользователю *kiko0217* дополнительную группу с правами root
-	`usermod -a -G group kiko0217` - Добавить пользователя *kiko0217* в группу
-	`usermod -d /var/www/kiko0217 kiko0217` - сменить домашнюю директорию
