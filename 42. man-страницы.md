# Размещение собственных man-страниц

## Стандартные директории для man-страниц

```bash
# Основные директории (по приоритету)
/usr/local/share/man/          # Локально установленные программы
/usr/share/man/                # Системные программы
/opt/<package>/share/man/      # Для программ в /opt
~/.local/share/man/            # Для пользовательских программ
```

## Структура по разделам

```
man1 - пользовательские команды
man2 - системные вызовы  
man3 - библиотечные функции
man5 - форматы файлов
man8 - административные команды
```

## Практический пример

### 1. Создание директории для man-страниц
```bash
# Создаем директорию для раздела 8 (административные команды)
sudo mkdir -p /usr/local/share/man/man8
```

### 2. Создание man-страницы
```bash
# Создаем файл man-страницы
sudo nano /usr/local/share/man/man8/myapp.8
```

### 3. Содержимое man-страницы
```groff
.TH MYAPP 8 "2024-01-15" "v1.0" "My Application Manual"
.SH NAME
myapp \- custom application for system management
.SH SYNOPSIS
.B myapp
[\-h] [\-v] [\-c \fICONFIG\fP]
.SH DESCRIPTION
.B myapp
is a custom system application that provides various services.
.SH OPTIONS
.TP
.B \-h, \-\-help
Show help message and exit
.TP
.B \-v, \-\-verbose
Enable verbose output
.TP
.B \-c, \-\-config \fICONFIG\fP
Specify configuration file
.SH EXAMPLES
.nf
myapp \-c /etc/myapp.conf
myapp \-\-verbose
.fi
.SH FILES
.I /etc/myapp.conf
.RS
Configuration file for myapp
.RE
.I /var/log/myapp.log
.RS
Log file
.RE
.SH SEE ALSO
systemd(1), journalctl(1)
.SH AUTHOR
Maintained by Your Name <email@example.com>
```

### 4. Обновление базы man-страниц
```bash
# Обновляем базу man-страниц
sudo mandb

# Или альтернативно (на некоторых системах)
sudo makewhatis /usr/local/share/man
```

### 5. Проверка доступности
```bash
# Проверяем, что man-страница доступна
man myapp
```

## Альтернативные варианты размещения

### Для системного пакета:
```bash
/usr/share/man/man8/myapp.8
```

### Для пользовательской установки:
```bash
~/.local/share/man/man8/myapp.8
# Добавляем в MANPATH
export MANPATH=$HOME/.local/share/man:$MANPATH
```

### Для программы в /opt:
```bash
/opt/myapp/share/man/man8/myapp.8
# Добавляем в manpath
export MANPATH=/opt/myapp/share/man:$MANPATH
```

## Обновление systemd сервиса

После создания man-страницы обновите сервисный файл:

```ini
[Unit]
Description=My Custom Service
Documentation=man:myapp(8)
# остальная конфигурация...
```

## Проверка всей цепочки

```bash
# Проверяем ссылку Documentation в systemd
systemctl show my-service.service -p Documentation

# Проверяем доступность man-страницы
man -w myapp        # Показывает путь к man-странице
man myapp           # Открывает man-страницу

# Проверяем сервис
systemctl status my-service.service
```

## Дополнительные возможности

### Несколько разделов:
```bash
/usr/local/share/man/man1/myapp.1      # Команда пользователя
/usr/local/share/man/man5/myapp.conf.5 # Конфигурационный файл
/usr/local/share/man/man8/myappd.8     # Демон
```

### Сжатие man-страниц (опционально):
```bash
# Сжимаем man-страницу
gzip /usr/local/share/man/man8/myapp.8
# Будет доступна как myapp.8.gz
```

Теперь ваша man-страница будет автоматически находиться systemd и доступна через команду `man myapp`.

--------------------------------------


