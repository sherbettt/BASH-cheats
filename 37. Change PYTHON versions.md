На RedOS7 установлен **Python 3.10.4** в `/usr/local/lib/python3.10`, но пакет `python3-dnf` требует **Python 3.8** (`python(abi) = 3.8`) и установлен в `/usr/lib/python3.8/site-packages/dnf`.

Давайте вернем Python 3.8 как версию по умолчанию с помощью `update-alternatives`:

## 1. Проверим текущие настройки python3:

```bash
update-alternatives --list
update-alternatives --list python3
update-alternatives --display python3
```

## 2. Добавим Python 3.8 в альтернативы:

```bash
# Добавим Python 3.8 с высоким приоритетом
update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.8 100

# Добавим Python 3.10 с более низким приоритетом (если нужно)
update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.10 50
```

## 3. Выберем Python 3.8 как версию по умолчанию:

```bash
# Настроим альтернативы
update-alternatives --config python3

# В появившемся меню выберите Python 3.8
```

## 4. Проверим текущую версию Python:

```bash
python3 --version
which python3
```

## 5. Проверим работу dnf:

```bash
dnf --version
dnf list installed | head -5
```

## 6. Установим python3-ujson:

```bash
dnf install python3-ujson
```

## 7. Если dnf все еще не работает, проверим пути Python:

```bash
python3 -c "import sys; print('\n'.join(sys.path))"
```

## 8. Проверим, что модуль dnf теперь доступен:

```bash
python3 -c "import dnf; print('dnf module works!')"
```

## 9. Если нужно, добавим пути к модулям Python 3.8:

```bash
# Проверим текущие пути
python3 -c "import sys; print('\n'.join(sys.path))"

# Если нет пути к site-packages Python 3.8, добавим его
export PYTHONPATH=/usr/lib/python3.8/site-packages:$PYTHONPATH
python3 -c "import dnf; print('dnf module works with PYTHONPATH!')"
```

## 10. Для постоянного решения добавим в профиль:

```bash
echo 'export PYTHONPATH=/usr/lib/python3.8/site-packages:$PYTHONPATH' >> /etc/profile.d/python38_path.sh
source /etc/profile.d/python38_path.sh
```

После этих действий dnf должен заработать, так как теперь система будет использовать Python 3.8, для которого установлены все необходимые модули.
