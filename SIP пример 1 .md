Call flow for 2 dialogs (Color by Request/Response)
```
                                                                                                                        │INVITE sip:989163640234@10.240.251.218:5060;user=ph
             10.190.9.11:5060            10.240.251.218:5060           10.240.251.218:5202             10.190.9.11:5060 │one SIP/2.0
          ──────────┬─────────          ──────────┬─────────          ──────────┬─────────          ──────────┬─────────│Via: SIP/2.0/UDP 10.190.9.11:5060;branch=z9hG4bKr6d
  15:06:41.474593   │        INVITE (SDP)         │                             │                             │         │aar6rga6pd983d3r9c7wrp
        +0.000910   │ ──────────────────────────> │                             │                             │         │Call-ID: wgwxpcb3brca6wg34agx9xgg9x7ab6ag@10.190.9.
  15:06:41.475503   │         100 Trying          │                             │                             │         │11
        +0.014839   │ <────────────────────────── │                             │                             │         │From: "6899"<sip:6899@10.190.9.11;user=phone>;tag=w
  15:06:41.490342   │                             │                             │        INVITE (SDP)         │         │7bpl34r
        +0.002924   │                             │                             │ ──────────────────────────> │         │To: 989163640234 <sip:989163640234@10.240.251.218;u
  15:06:41.493266   │  183 Session Progress (SDP) │                             │                             │         │ser=phone>
        +0.997144   │ <────────────────────────── │                             │                             │         │CSeq: 1 INVITE
  15:06:42.490410   │                             │                             │        INVITE (SDP)         │         │Contact: <sip:6899@10.190.9.11:5060;user=phone>;Cal
        +1.999988   │                             │                             │ ────────────────────────>>> │         │lLocation=EXTERNAL
  15:06:44.490398   │                             │                             │        INVITE (SDP)         │         │Allow: INVITE,ACK,OPTIONS,BYE,CANCEL,REGISTER,INFO,
        +4.000001   │                             │                             │ ────────────────────────>>> │         │PRACK,SUBSCRIBE,NOTIFY,UPDATE,PUBLISH
  15:06:48.490399   │                             │                             │        INVITE (SDP)         │         │Max-Forwards: 70
        +8.000003   │                             │                             │ ────────────────────────>>> │         │Content-Length: 576
  15:06:56.490402   │                             │                             │        INVITE (SDP)         │         │Content-Type: application/sdp
       +16.000003   │                             │                             │ ────────────────────────>>> │         │
  15:07:12.490405   │                             │                             │        INVITE (SDP)         │         │v=0
        +1.002061   │                             │                             │ ────────────────────────>>> │         │o=HuaweieSpaceV200R003C50SPC900 918742 918742 IN IP
  15:07:13.492466   │     408 Request Timeout     │                             │                             │         │4 10.190.9.11
        +0.008808   │ <────────────────────────── │                             │                             │         │s=A conversation
  15:07:13.501274   │             ACK             │                             │                             │         │c=IN IP4 10.190.24.40
                    │ ──────────────────────────> │                             │                             │         │t=0 0
                    │                             │                             │                             │         │m=audio 10006 RTP/AVP 0 8 102 18 4 97 108 9 109 101
                    │                             │                             │                             │         │a=rtpmap:0 PCMU/8000
                    │                             │                             │                             │         │a=rtpmap:8 PCMA/8000
                    │                             │                             │                             │         │a=rtpmap:102 G726-32/8000
                    │                             │                             │                             │         │a=rtpmap:18 G729/8000
                    │                             │                             │                             │         │a=fmtp:18 annexb=no
                    │                             │                             │                             │         │a=rtpmap:4 G723/8000
                    │                             │                             │                             │         │a=fmtp:4 bitrate=6.3;annexa=no
                    │                             │                             │                             │         │a=rtpmap:97 iLBC/8000
                    │                             │                             │                             │         │a=fmtp:97 mode=20
                    │                             │                             │                             │         │a=rtpmap:108 AMR/8000
                    │                             │                             │                             │         │a=fmtp:108 mode-set=7;octet-align=0
                    │                             │                             │                             │         │a=rtpmap:9 G722/8000
                    │                             │                             │                             │         │a=rtpmap:109 AMR-WB/16000
                    │                             │                             │                             │         │a=fmtp:109 mode-set=8;octet-align=0
                                                                                                                        │
```

### Проблема в SIP-вызове: **Таймаут запроса (408 Request Timeout)**  

#### Что происходит:  
1. **Исходный INVITE** отправлен с `10.190.9.11` на SIP-прокси (`10.240.251.218:5060`).  
2. Прокси отвечает **100 Trying** (подтверждает получение запроса).  
3. Прокси пересылает INVITE на конечное устройство (`10.240.251.218:5202`).  
4. Прокси отправляет обратно **183 Session Progress** (с SDP), что означает начало установки вызова.  
5. **INVITE повторно передаётся несколько раз** (через 1, 2, 4, 8, 16 сек), но **нет финального ответа** (180 Ringing или 200 OK) от конечного устройства.  
6. Через ~72 секунды прокси возвращает **408 Request Timeout**, так как устройство не ответило вовремя.  

#### Причины сбоя:  
- **Конечное устройство (`10.240.251.218:5202`) не отвечает** после **183 Session Progress**.  
- Возможные проблемы:  
  - **Сеть**: Пакеты не доходят (потеря UDP, блокировка фаерволом).  
  - **Устройство**: Оно выключено, перегружено или некорректно настроено.  
  - **SIP-стек**: Ошибка обработки INVITE на стороне получателя.  
  - **NAT/Фаервол**: Если устройство за NAT, возможны проблемы с маршрутизацией SIP/SDP.  

#### Что проверить:  
1. **Доступность `10.240.251.218:5202`** (ping, traceroute, проверка порта).  
2. **Логи SIP на конечном устройстве** (принимало ли оно INVITE?).  
3. **Потерю пакетов** между прокси (`5060`) и устройством (`5202`).  
4. **Регистрацию устройства** (если требуется).  
5. **Настройки таймеров SIP** (слишком агрессивные ретрансляции?).  
6. **Фаервол/NAT** (если устройство за NAT, нужна правильная настройка).  

-------------------

# Анализ SIP INVITE сообщения

Это SIP-запрос типа INVITE, который инициирует установку VoIP-сессии между двумя абонентами. Давайте разберём его по частям:

## SIP-заголовки

- **INVITE**: Запрос на установление сессии для номера `989163640234` на сервере `10.240.251.218:5060`
- **Via**: Указывает путь ответа через UDP на `10.190.9.11:5060`
- **Call-ID**: Уникальный идентификатор вызова
- **From**: Идентификатор вызывающего абонента "6899" с тегом `w7bpl34r`
- **To**: Целевой абонент `989163640234`
- **CSeq**: Порядковый номер команды (1 INVITE)
- **Contact**: Обратный адрес для ответов `sip:6899@10.190.9.11:5060`
- **Allow**: Поддерживаемые методы SIP
- **Max-Forwards**: Максимальное количество переходов (70)
- **Content-Type**: Тип содержимого - SDP (Session Description Protocol)

## SDP-часть (описание сессии)

- **v=0**: Версия SDP
- **o=**: Идентификатор сессии (Huawei eSpace V200R003C50SPC900)
- **s=**: Название сессии ("A conversation")
- **c=**: IP-адрес подключения (`10.190.24.40`)
- **m=audio**: Аудиопоток на порту 10006 с поддерживаемыми кодеками:
  - 0: PCMU (G.711 μ-law)
  - 8: PCMA (G.711 A-law)
  - 102: G.726-32
  - 18: G.729
  - 4: G.723.1 (6.3 kbps)
  - 97: iLBC (mode=20)
  - 108: AMR (mode-set 7)
  - 9: G.722
  - 109: AMR-WB (wideband, mode-set 8)

## Технические особенности

1. Оборудование: Huawei eSpace V200R003C50SPC900 (это IP-телефон или VoIP-шлюз Huawei)
2. Сеть: Внутренняя IP-сеть (адреса 10.x.x.x)
3. Поддержка широкого набора аудиокодеков от узкополосных (G.711, G.729) до широкополосных (G.722, AMR-WB)
4. CallLocation=EXTERNAL в заголовке Contact может указывать на то, что вызов идёт из внешней сети

Это типичный SIP-запрос для установки голосового вызова между VoIP-устройствами в корпоративной или операторской сети.
