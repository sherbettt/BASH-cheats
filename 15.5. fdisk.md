**fdisk** — это утилита для работы с разделами диска в Linux. Она позволяет создавать, удалять, изменять и просматривать разделы на жестких дисках и других устройствах хранения.  

### **Основные параметры `fdisk`**  

| Параметр | Описание |
|----------|----------|
| `-l`     | Вывести список разделов на всех или указанных дисках |
| `-s`     | Показать размер раздела в блоках |
| `-v`     | Вывести версию `fdisk` |
| `-u`     | Использовать секторы вместо цилиндров при выводе |
| `-c`     | Отключить DOS-совместимый режим (по умолчанию включен) |
| `-b`     | Указать размер сектора (512, 1024, 2048, 4096) |
| `-C`     | Указать количество цилиндров |
| `-H`     | Указать количество головок |
| `-S`     | Указать количество секторов на дорожку |

### **Команды внутри интерактивного режима `fdisk`**  
После запуска `fdisk /dev/sdX` (где `sdX` — имя диска) можно использовать следующие команды:  

| Команда | Описание |
|---------|----------|
| `m`     | Вывести справку |
| `p`     | Вывести таблицу разделов |
| `n`     | Создать новый раздел |
| `d`     | Удалить раздел |
| `t`     | Изменить тип раздела (например, Linux, swap, LVM) |
| `w`     | Сохранить изменения и выйти |
| `q`     | Выйти без сохранения |
| `a`     | Сделать раздел загрузочным |
| `g`     | Создать новую GPT-таблицу разделов |
| `o`     | Создать новую MBR-таблицу разделов |
| `l`     | Показать список известных типов разделов |

### **Примеры использования `fdisk`**  

#### **1. Просмотр списка разделов**  
```bash
sudo fdisk -l
```
Выведет список всех разделов на всех подключенных дисках.  

#### **2. Создание нового раздела на `/dev/sdb`**  
```bash
sudo fdisk /dev/sdb
```
Далее в интерактивном режиме:  
- `n` → создать новый раздел  
- `p` → primary (основной)  
- `1` → номер раздела  
- Нажать Enter для выбора первого доступного сектора  
- Указать размер (например, `+10G` для 10 ГБ)  
- `w` → записать изменения  

#### **3. Изменение типа раздела**  
```bash
sudo fdisk /dev/sdb
```
- `t` → выбрать раздел  
- Ввести код типа (например, `82` для swap, `83` для Linux)  
- `w` → сохранить  

#### **4. Удаление раздела**  
```bash
sudo fdisk /dev/sdb
```
- `d` → выбрать номер раздела  
- `w` → сохранить  

### **Важно!**  
- Все изменения вступают в силу только после команды `w`.  
- Если сделали что-то не так — можно выйти через `q` без сохранения.  
- После изменения разделов может потребоваться `partprobe` или перезагрузка.  

--------------------------------

Если нужна работа с GPT, лучше использовать `gdisk` или `parted`.


**gdisk** — это утилита для работы с **GPT (GUID Partition Table)** в Linux. Она аналогична `fdisk`, но предназначена для дисков с GPT, которые поддерживают больше разделов (>4) и используются на современных системах (особенно с UEFI).  

## **Основные параметры `gdisk`**  

| Параметр | Описание |
|----------|----------|
| `-l`     | Вывести список разделов на указанном диске |
| `-p`     | Вывести таблицу разделов (аналог `p` в интерактивном режиме) |
| `-v`     | Вывести версию `gdisk` |
| `-b <файл>` | Сохранить резервную копию GPT в файл |
| `-l <файл>` | Загрузить таблицу разделов из файла |
| `-c`     | Изменить имя раздела (метку) |
| `-u`     | Показать UUID разделов |
| `-e`     | Редактировать дополнительные метаданные GPT |



## **Команды внутри интерактивного режима `gdisk`**  
После запуска `gdisk /dev/sdX` (где `sdX` — имя диска) можно использовать следующие команды:  

| Команда | Описание |
|---------|----------|
| `p`     | Вывести таблицу разделов (Partition table) |
| `n`     | Создать новый раздел |
| `d`     | Удалить раздел |
| `t`     | Изменить тип раздела (GUID) |
| `c`     | Изменить имя раздела |
| `w`     | Сохранить изменения и выйти |
| `q`     | Выйти без сохранения |
| `i`     | Показать информацию о разделе |
| `l`     | Показать список известных типов разделов |
| `o`     | Создать новую пустую GPT (стирает все данные!) |
| `r`     | Перейти в экспертный режим (доп. команды) |
| `b`     | Сохранить резервную копию GPT |
| `x`     | Включить экспертный режим (расширенные функции) |



## **Примеры использования `gdisk`**  

### **1. Просмотр таблицы разделов**  
```bash
sudo gdisk -l /dev/sda
```
Выведет список всех разделов на диске `/dev/sda` в GPT.  

### **2. Создание нового GPT-раздела**  
```bash
sudo gdisk /dev/sdb
```
Далее в интерактивном режиме:  
- `o` → создать новую GPT (если диск не размечен)  
- `n` → создать новый раздел  
- Указать номер раздела (по умолчанию `1`)  
- Выбрать первый и последний сектор (можно просто Enter для автоматического выбора)  
- Указать тип (например, `8300` для Linux, `ef00` для ESP (EFI System Partition))  
- `w` → записать изменения  

### **3. Изменение типа раздела**  
```bash
sudo gdisk /dev/sdb
```
- `t` → выбрать раздел  
- Ввести GUID типа (например, `ef00` для EFI, `8200` для swap)  
- `w` → сохранить  

### **4. Удаление раздела**  
```bash
sudo gdisk /dev/sdb
```
- `d` → выбрать номер раздела  
- `w` → сохранить  

### **5. Восстановление GPT из резервной копии**  
```bash
sudo gdisk /dev/sdb
```
- `r` → войти в режим восстановления  
- `b` → восстановить GPT из резервной копии  
- `w` → записать изменения  



## **Отличие `gdisk` от `fdisk`**  
| Особенность | `fdisk` | `gdisk` |
|-------------|---------|---------|
| **Таблица разделов** | MBR (DOS) | GPT |
| **Макс. разделов** | 4 основных | 128+ |
| **Поддержка >2TB** | ❌ Нет | ✅ Да |
| **UEFI-совместимость** | ❌ Нет | ✅ Да |
| **Типы разделов** | HEX-коды (например, `83`) | GUID (например, `8300`) |



## **Заключение**  
- **`gdisk`** — мощный инструмент для работы с GPT.  
- Все изменения применяются только после `w`.  
- Если что-то пошло не так — используйте `q` для выхода без сохранения.  
- Для дисков **>2TB** и **UEFI-систем** `gdisk` предпочтительнее `fdisk`.  

Если нужна **MBR** — используйте `fdisk`, если **GPT** — `gdisk` или `parted`.
