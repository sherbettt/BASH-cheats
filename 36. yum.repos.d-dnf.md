На узле 192.168.87.24 (redos.runtel.ru) после смены `python3.8` на  `python 3.10` накрылись модули `dnf` и `yum`.

Смотрим репы и что внутри них:
```bash
[root@redos redos-fix]# ll /etc/yum.repos.d/
итого 32
drwxr-xr-x. 116 root root 12288 авг 25 16:54 ../
drwxr-xr-x.   2 root root  4096 июн 20  2024 ./
-rw-r--r--.   1 root root   316 мар 31  2023 RedOS-kernels6.repo
-rw-r--r--.   1 root root   272 авг  6 11:56 RedOS-Updates.repo
-rw-r--r--.   1 root root   251 авг  6 11:56 RedOS-Base.repo
-rw-r--r--.   1 root root   150 окт 10  2024 Runtel.repo

[root@redos redos-fix]# cat /etc/yum.repos.d/Runtel.repo | ccze -A
[runtel] 
name = Runtel 
baseurl = http://repo.runtel.ru/redos/redos/7/epel/x86_64/ 
gpgcheck = 1 
gpgkey = http://repo.runtel.ru/runtel.gpg 
enabled = 1 

[root@redos redos-fix]# cat /etc/yum.repos.d/RedOS-Base.repo | ccze -A
[base] 
name=RedOS - Base 
baseurl=https://repo1.red-soft.ru/redos/7.3/$basearch/os,https://mirror.yandex.ru/redos/7.3/$basearch/os,http://repo.red-soft.ru/redos/7.3/$basearch/os 
gpgcheck=1 
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-RED-SOFT 
enabled=1 
```

Переходим по ссылкам И в скачиваем `dnf` и `yum`:
 - http://repo.runtel.ru/redos/redos/7/epel/x86_64/
 - https://mirror.yandex.ru/redos/7.3/x86_64/os/

```bash
[root@redos redos-fix]# pwd
/tmp/redos-fix
[root@redos redos-fix]# ll
итого 3532
drwxrwxrwt. 426 root root   45056 авг 26 11:41 ../
drwxr-xr-x.   2 root root    4096 авг 26 11:50 ./
-rw-r--r--.   1 root root 1258644 апр  8 17:46 yum-3.4.3-164.el7.noarch.rpm
-rw-r--r--.   1 root root  739576 апр  8 20:01 python2-libdnf-0.48.0-4.el7.x86_64.rpm
-rw-r--r--.   1 root root  419132 апр  8 19:56 python2-dnf-4.2.23-3.el7.noarch.rpm
-rw-r--r--.   1 root root  401156 апр  8 19:56 dnf-4.2.23-3.el7.noarch.rpm
-rw-r--r--.   1 root root  193936 апр  8 18:11 yumex-dnf-4.3.3-1.el7.noarch.rpm
-rw-r--r--.   1 root root  186904 апр  8 20:01 python3-dnf-plugins-core-4.0.18-3.el7.noarch.rpm
-rw-r--r--.   1 root root  112936 апр  8 18:40 yum-utils-1.1.31-51.el7.noarch.rpm
-rw-r--r--.   1 root root   91740 апр  8 20:01 python3-hawkey-0.48.0-4.el7.x86_64.rpm
-rw-r--r--.   1 root root   30848 апр  8 19:56 dnf-data-4.2.23-3.el7.noarch.rpm
-rw-r--r--.   1 root root   27948 апр  8 20:01 dnf-plugins-core-4.0.18-3.el7.noarch.rpm
-rw-r--r--.   1 root root   27568 апр  8 19:56 dnf-yum-4.2.23-3.el7.noarch.rpm
-rw-r--r--.   1 root root   26480 апр  8 19:56 dnf-automatic-4.2.23-3.el7.noarch.rpm
-rw-r--r--.   1 root root   22092 апр  8 18:40 yum-langpacks-0.4.5-1.el7.noarch.rpm
```



## 1. Переустановка пакетов в правильном порядке:

```bash
# Перейдем в директорию с пакетами
cd /tmp/redos-fix

# Установим основные пакеты в правильном порядке:
rpm -Uvh --force python3-libdnf-*.rpm
rpm -Uvh --force python3-hawkey-*.rpm
rpm -Uvh --force dnf-data-*.rpm
rpm -Uvh --force dnf-*.rpm
rpm -Uvh --force python3-dnf-*.rpm
rpm -Uvh --force dnf-yum-*.rpm
rpm -Uvh --force dnf-plugins-core-*.rpm
rpm -Uvh --force yum-*.rpm
rpm -Uvh --force yum-utils-*.rpm
```

## 2. Если есть ошибки зависимостей, установим все сразу:

```bash
# Установим все пакеты вместе, игнорируя зависимости
rpm -Uvh --force --nodeps *.rpm
```

## 3. Проверим работу:

```bash
# Проверим dnf
dnf --version
which dnf

# Проверим yum
yum --version

# Проверим python модуль
python3 -c "import dnf; print('dnf module works')"
```

## 4. Установим python3-ujson:

```bash
# Теперь установим нужный пакет
dnf install python3-ujson

# Или через yum
yum install python3-ujson
```

## 5. Если пакет python3-ujson не находится:

```bash
# Поищем пакет в репозиториях
dnf search ujson
yum search ujson

# Или установим через pip
python3 -m pip install ujson
```

## 6. Восстановим симлинки если нужно:

```bash
# Проверим симлинки
ls -la /usr/bin/dnf*
ls -la /usr/bin/yum*

# Если нужно, создадим симлинк
ln -sf /usr/bin/dnf-3 /usr/bin/dnf
```

## 7. Проверим целостность установки:

```bash
# Проверим установленные пакеты
rpm -qa | grep -E "(dnf|yum|python3)" | sort

# Проверим файлы
rpm -V dnf python3-dnf yum
```

## 8. Очистим кеш и обновим:

```bash
dnf clean all
dnf makecache
dnf check-update
```

После переустановки пакетов dnf и yum должны заработать. Если будут ошибки зависимостей, используйте `--nodeps` для принудительной установки.
