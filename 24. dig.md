См. на Lost.pro: [Команда dig в Linux](https://losst.pro/komanda-dig-v-linux)

### Подробная расшифровка команды `dig`

Вы выполнили следующую команду:

```bash
dig @test-gw.bind.local. ya.ru A -u
```

Давайте разберем её детально:

---

#### 1. Структура команды:
- **`dig`**: Инструмент для проверки DNS-запросов.
- **`@test-gw.bind.local.`**: Указываем конкретный DNS-сервер, к которому мы отправляем запрос. Здесь DNS-сервер указан именем, а не IP-адресом.
- **`ya.ru`**: Доменное имя, которое запрашиваем.
- **`A`**: Запрашиваем тип записи DNS — A (IPv4-адрес).
- **`-u`**: Флаг, ограничивающий длину пакета UDP (это полезно для проверки поведения DNS-серверов с поддержкой расширений EDNS).

---

#### 2. Основные поля вывода:

```bash
; <<>> DiG 9.18.33-1~deb12u2-Debian <<>> @test-gw.bind.local. ya.ru A -u
; (1 server found)
;; global options: +cmd
```
- **Версия Dig:** Вы используете версию `9.18.33`.
- **Количество серверов:** Обнаружен один DNS-сервер.
- **Global Options:** Включены глобальные опции, такие как вывод подробной информации о команде (`+cmd`).

---

```bash
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54839
;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1
```
- **Операция (opcode):** Обычный запрос (`QUERY`).
- **Код статуса:** Без ошибок (`NOERROR`).
- **Идентификатор:** ID = `54839`.
- **Флаги:**
  - **QR:** Запись является ответом.
  - **RD:** Рекурсивный запрос разрешён.
  - **RA:** DNS-сервер поддерживает рекурсию.
- **Кол-во записей:**
  - **Query:** Один запрос.
  - **Answer:** Три записи в ответе.
  - **Authority:** Ноль авторитетных записей.
  - **Additional:** Одна дополнительная запись.

---

```bash
;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 1232
; COOKIE: 01d38c22d82abd74010000006848073b3b107012291d6c51 (good)
```
- **EDNS (Extended DNS):** Версия протокола расширенного DNS равна 0, поддерживаются пакеты размером до 1232 байтов по UDP.
- **Cookie:** Отправленный cookie принимается как верный.

---

```bash
;; QUESTION SECTION:
;ya.ru.                                IN      A
```
- **Вопрос:** Запрашиваем адрес типа A для домена `ya.ru`.

---

```bash
;; ANSWER SECTION:
ya.ru.            82     IN      A       77.88.44.242
ya.ru.            82     IN      A       77.88.55.242
ya.ru.            82     IN      A       5.255.255.242
```
- **Ответ:** Получаем три IPv4 адреса для домена `ya.ru`:
  - `77.88.44.242`
  - `77.88.55.242`
  - `5.255.255.242`
- Срок жизни каждой записи (TTL) равен 82 секундам.

---

```bash
;; Query time: 124 usec
;; SERVER: 192.168.56.1#53(test-gw.bind.local.) (UDP)
;; WHEN: Tue Jun 10 10:21:47 UTC 2025
;; MSG SIZE  rcvd: 110
```
- **Время выполнения запроса:** Примерно 124 микросекунды.
- **Адрес DNS-сервера:** Сервер расположен по адресу `192.168.56.1`, доступный по стандартному DNS-порту 53.
- **Дата и время выполнения запроса:** Вторник, 10 июня 2025 г., 10:21:47 UTC.
- **Размер принятого сообщения:** 110 байт.

---

### Расшифровка команды и результата выполнения:

Команду `dig` использовали следующим образом:

```bash
dig @192.168.56.1 ya.ru SOA
```

Теперь давайте подробнее рассмотрим каждый аспект выполненной команды и результатов.

---

### Элементы команды:

- **`dig`**: Утилита для отправки запросов DNS и анализа полученных ответов.
- **`@192.168.56.1`**: Указали конкретный DNS-сервер, на который отправили запрос.
- **`ya.ru`**: Запрашиваемый домен.
- **`SOA`**: Запрашиваем именно запись Start of Authority (начало зоны ответственности), содержащую административную информацию о зоне DNS.

---

### Результаты выполнения команды:

```bash
; <<>> DiG 9.18.33-1~deb12u2-Debian <<>> @192.168.56.1 ya.ru SOA
; (1 server found)
;; global options: +cmd
```
- **ДиГ-версия:** Использована версия `9.18.33`.
- **Найденный сервер:** Был обнаружен один DNS-сервер.
- **Global Options:** Показаны общие настройки, включая `+cmd`, означающий вывод подробной информации о выполнении команды.

---

```bash
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 45334
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
```
- **Got Answer:** Получен успешный ответ от DNS-сервера.
- **Header Fields:**
  - **Opcode:** Обычный запрос (`QUERY`).
  - **Status:** Нет ошибок (`NOERROR`).
  - **ID:** Идентификатор запроса — `45334`.
- **Флаги:**
  - **QR:** Отвечающая запись.
  - **RD:** Разрешается рекурсивный запрос.
  - **RA:** Сервер поддерживает рекурсию.
- **Количество записей:**
  - **Queries:** 1 запрос.
  - **Answers:** 1 ответная запись.
  - **Authorities:** 0 авторитетных записей.
  - **Additionals:** 1 дополнительная запись.

---

```bash
;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 1232
; COOKIE: ea0ea923dfaddde701000000684808a97fe83722778efb23 (good)
```
- **EDNS (Extensions for DNS):** Версия EDNS — 0, поддерживается передача пакетов размером до 1232 байт по UDP.
- **Cookie:** Присланный cookie принят как хороший.

---

```bash
;; QUESTION SECTION:
;ya.ru.                            IN      SOA
```
- **Question Section:** Запрашиваем запись типа SOA для домена `ya.ru`.

---

```bash
;; ANSWER SECTION:
ya.ru.           3600   IN      SOA ns1.yandex.ru. sysadmin.yandex.ru. 2023031729 900 600 2592000 900
```
- **Ответная секция:**
  - **Domain Name:** `ya.ru`.
  - **TTL:** 3600 секунд (1 час).
  - **Тип записи:** SOA.
  - **Первичный мастер-сервер:** `ns1.yandex.ru`.
  - **Администратор зон:** `sysadmin.yandex.ru`.
  - **Serial Number:** Последняя версия файла зоны — `2023031729`.
  - **Refresh Interval:** Период обновления вторичными серверами — каждые 900 секунд (15 минут).
  - **Retry Interval:** Интервал повторных попыток синхронизации — каждые 600 секунд (10 минут).
  - **Expire Time:** Максимальное время хранения зоны на вторичном сервере перед признанием устаревшей — 2592000 секунд (~30 суток).
  - **Negative Cache TTL:** Минимальное время кэширования отрицательных ответов — 900 секунд (15 минут).

---

```bash
;; Query time: 25 msec
;; SERVER: 192.168.56.1#53(192.168.56.1) (UDP)
;; WHEN: Tue Jun 10 10:27:53 UTC 2025
;; MSG SIZE  rcvd: 120
```
- **Time:** Запрос выполнен примерно за 25 мс.
- **Server Address:** Использовался DNS-сервер по адресу `192.168.56.1`, стандартный DNS-порт 53, протокол UDP.
- **Date & Time:** Выполнено во вторник, 10 июня 2025 г., в 10:27:53 UTC.
- **Message Size:** Размер принятого сообщения — 120 байт.


