SIP (Session Initiation Protocol) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã—Ö —Å–µ–∞–Ω—Å–æ–≤ —Å–≤—è–∑–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ VoIP-–∑–≤–æ–Ω–∫–∏, –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –∏ –æ–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.  

### **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã SIP-–∑–∞–ø—Ä–æ—Å–æ–≤ (–º–µ—Ç–æ–¥—ã)**  
1. **INVITE** ‚Äì –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Å–µ–∞–Ω—Å —Å–≤—è–∑–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–≤–æ–Ω–æ–∫).  
2. **ACK** ‚Äì –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–ø—Ä–æ—Å–∞ (–ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ INVITE).  
3. **BYE** ‚Äì –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–µ–∞–Ω—Å —Å–≤—è–∑–∏.  
4. **CANCEL** ‚Äì –æ—Ç–º–µ–Ω—è–µ—Ç –æ–∂–∏–¥–∞—é—â–∏–π –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∑–≤–æ–Ω–æ–∫ –Ω–µ –±—ã–ª –ø—Ä–∏–Ω—è—Ç).  
5. **OPTIONS** ‚Äì –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ UA (User Agent).  
6. **REGISTER** ‚Äì —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ SIP-—Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ VoIP-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—É).  
7. **SUBSCRIBE** ‚Äì –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö.  
8. **NOTIFY** ‚Äì –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö.  
9. **PUBLISH** ‚Äì –ø—É–±–ª–∏–∫—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.  
10. **REFER** ‚Äì –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–∑–æ–≤ –∏–ª–∏ —Å–µ–∞–Ω—Å.  
11. **MESSAGE** ‚Äì –ø–µ—Ä–µ–¥–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (SMS-–ø–æ–¥–æ–±–Ω—ã–µ).  

-------------
# üìû –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã SIP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞  

SIP (Session Initiation Protocol) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã—Ö —Å–µ–∞–Ω—Å–æ–≤ (–≥–æ–ª–æ—Å–æ–≤—ã—Ö/–≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–æ–≤, —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Ç. –¥.).  

## **1. `INVITE` ‚Äì –∏–Ω–∏—Ü–∏–∞—Ü–∏—è —Å–µ–∞–Ω—Å–∞ —Å–≤—è–∑–∏**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –ù–∞—á–∏–Ω–∞–µ—Ç —Å–µ–∞–Ω—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, VoIP-–∑–≤–æ–Ω–æ–∫, –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é).  
- –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å SDP (Session Description Protocol) –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∫–æ–¥–µ–∫–∏, –ø–æ—Ä—Ç—ã –∏ —Ç. –¥.).  

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**  
```sip
INVITE sip:bob@example.com SIP/2.0
Via: SIP/2.0/UDP alice-pc.example.com:5060
From: Alice <sip:alice@example.com>;tag=12345
To: Bob <sip:bob@example.com>
Call-ID: abc123@alice-pc.example.com
CSeq: 1 INVITE
Contact: <sip:alice@alice-pc.example.com>
Content-Type: application/sdp
Content-Length: [–¥–ª–∏–Ω–∞ —Ç–µ–ª–∞]

v=0
o=alice 2890844526 2890844526 IN IP4 alice-pc.example.com
s=-
c=IN IP4 192.0.2.1
t=0 0
m=audio 49170 RTP/AVP 0
a=rtpmap:0 PCMU/8000
```

**–û—Ç–≤–µ—Ç—ã:**  
- `180 Ringing` ‚Äì –≤—ã–∑–æ–≤ –∏–¥–µ—Ç.  
- `200 OK` ‚Äì –≤—ã–∑–æ–≤ –ø—Ä–∏–Ω—è—Ç.  
- `486 Busy Here` ‚Äì –∞–±–æ–Ω–µ–Ω—Ç –∑–∞–Ω—è—Ç.  



## **2. `ACK` ‚Äì –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ–∞–Ω—Å–∞**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ `INVITE` (–æ–±—ã—á–Ω–æ `200 OK`).  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å `INVITE`.  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
ACK sip:bob@example.com SIP/2.0
Via: SIP/2.0/UDP alice-pc.example.com:5060
From: Alice <sip:alice@example.com>;tag=12345
To: Bob <sip:bob@example.com>;tag=67890
Call-ID: abc123@alice-pc.example.com
CSeq: 1 ACK
Content-Length: 0
```



## **3. `BYE` ‚Äì –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ–∞–Ω—Å–∞**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –ó–∞–≤–µ—Ä—à–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–µ–∞–Ω—Å (—Ä–∞–∑–≥–æ–≤–æ—Ä, –≤–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫).  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
BYE sip:alice@example.com SIP/2.0
Via: SIP/2.0/UDP bob-pc.example.com:5060
From: Bob <sip:bob@example.com>;tag=67890
To: Alice <sip:alice@example.com>;tag=12345
Call-ID: abc123@alice-pc.example.com
CSeq: 2 BYE
Content-Length: 0
```

**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äì —Å–µ–∞–Ω—Å –∑–∞–≤–µ—Ä—à–µ–Ω.  



## **4. `CANCEL` ‚Äì –æ—Ç–º–µ–Ω–∞ –æ–∂–∏–¥–∞—é—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –û—Ç–º–µ–Ω—è–µ—Ç `INVITE` –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (–µ—Å–ª–∏ –∞–±–æ–Ω–µ–Ω—Ç –Ω–µ –≤–∑—è–ª —Ç—Ä—É–±–∫—É).  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
CANCEL sip:bob@example.com SIP/2.0
Via: SIP/2.0/UDP alice-pc.example.com:5060
From: Alice <sip:alice@example.com>;tag=12345
To: Bob <sip:bob@example.com>
Call-ID: abc123@alice-pc.example.com
CSeq: 1 CANCEL
Content-Length: 0
```

**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äì –æ—Ç–º–µ–Ω–∞ –ø—Ä–∏–Ω—è—Ç–∞.  



## **5. `OPTIONS` ‚Äì –∑–∞–ø—Ä–æ—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π UA/—Å–µ—Ä–≤–µ—Ä–∞**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤, –∫–æ–¥–µ–∫–æ–≤ –∏ —Ç. –¥.  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
OPTIONS sip:server.example.com SIP/2.0
Via: SIP/2.0/UDP client.example.com:5060
From: <sip:user@client.example.com>;tag=12345
To: <sip:server@example.com>
Call-ID: 987654@client.example.com
CSeq: 1 OPTIONS
Contact: <sip:user@client.example.com>
Accept: application/sdp
Content-Length: 0
```

**–û—Ç–≤–µ—Ç (`200 OK` —Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏):**  
```sip
SIP/2.0 200 OK
Allow: INVITE, ACK, BYE, CANCEL, OPTIONS, REGISTER
Content-Length: 0
```


## **6. `REGISTER` ‚Äì —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ SIP-—Å–µ—Ä–≤–µ—Ä–µ**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ VoIP-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—É).  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
REGISTER sip:example.com SIP/2.0
Via: SIP/2.0/UDP client.example.com:5060
From: <sip:user@example.com>;tag=12345
To: <sip:user@example.com>
Call-ID: 123456@client.example.com
CSeq: 1 REGISTER
Contact: <sip:user@client.example.com>;expires=3600
Content-Length: 0
```

**–û—Ç–≤–µ—Ç:**  
- `200 OK` ‚Äì —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞.  
- `401 Unauthorized` ‚Äì —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.  



## **7. `SUBSCRIBE` / `NOTIFY` ‚Äì –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- `SUBSCRIBE` ‚Äì –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç—É—Å presence).  
- `NOTIFY` ‚Äì –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö.  

**–ü—Ä–∏–º–µ—Ä `SUBSCRIBE`:**  
```sip
SUBSCRIBE sip:bob@example.com SIP/2.0
Event: presence
Expires: 3600
```

**–ü—Ä–∏–º–µ—Ä `NOTIFY`:**  
```sip
NOTIFY sip:alice@example.com SIP/2.0
Event: presence
Content-Type: application/pidf+xml
```



## **8. `PUBLISH` ‚Äì –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç—É—Å "–í —Å–µ—Ç–∏").  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
PUBLISH sip:server.example.com SIP/2.0
Event: presence
Content-Type: application/pidf+xml
```



## **9. `REFER` ‚Äì –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–∑–æ–≤ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
REFER sip:alice@example.com SIP/2.0
Refer-To: <sip:carol@example.com>
```



## **10. `MESSAGE` ‚Äì –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π**  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**  
- –ê–Ω–∞–ª–æ–≥ SMS –≤ SIP (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∞—Ç –≤ VoIP-–∫–ª–∏–µ–Ω—Ç–∞—Ö).  

**–ü—Ä–∏–º–µ—Ä:**  
```sip
MESSAGE sip:bob@example.com SIP/2.0
Content-Type: text/plain
Content-Length: 12

–ü—Ä–∏–≤–µ—Ç, Bob!
```

**üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**  
- –î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Ç–æ–¥–æ–≤ (`SUBSCRIBE`, `NOTIFY`, `PUBLISH`) —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **SIP Event Packages**.  
- `INVITE` –∏ `BYE` —É–ø—Ä–∞–≤–ª—è—é—Ç —Å–µ–∞–Ω—Å–∞–º–∏, –∞ `REGISTER` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é.  
-------------

### **SIP-–æ—Ç–≤–µ—Ç—ã (–∫–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π)**  
–û—Ç–≤–µ—Ç—ã SIP –¥–µ–ª—è—Ç—Å—è –Ω–∞ **6 –∫–ª–∞—Å—Å–æ–≤**, –≥–¥–µ –ø–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞:  

#### **1xx (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ)** ‚Äì –∑–∞–ø—Ä–æ—Å –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ  
- **100 Trying** ‚Äì –∑–∞–ø—Ä–æ—Å –ø–æ–ª—É—á–µ–Ω, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.  
- **180 Ringing** ‚Äì —É–¥–∞–ª–µ–Ω–Ω—ã–π UA "–∑–≤–æ–Ω–∏—Ç" (–∞–±–æ–Ω–µ–Ω—Ç—É).  
- **183 Session Progress** ‚Äì —Å–µ–∞–Ω—Å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (–º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å —Ä–∞–Ω–Ω–∏–π –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫).  

#### **2xx (–£—Å–ø–µ—à–Ω—ã–µ)** ‚Äì –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω  
- **200 OK** ‚Äì –∑–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–≤–æ–Ω–æ–∫ –ø—Ä–∏–Ω—è—Ç).  
- **202 Accepted** ‚Äì –∑–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç, –Ω–æ –µ—â–µ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ NOTIFY, SUBSCRIBE).  

#### **3xx (–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è)** ‚Äì —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ  
- **301 Moved Permanently** ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–µ—Ö–∞–ª –Ω–∞ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å.  
- **302 Moved Temporarily** ‚Äì –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.  
- **305 Use Proxy** ‚Äì –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–æ–∫—Å–∏.  
- **380 Alternative Service** ‚Äì –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–æ–ª–æ—Å–æ–≤–∞—è –ø–æ—á—Ç–∞).  

#### **4xx (–û—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞)** ‚Äì –∑–∞–ø—Ä–æ—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫—É  
- **400 Bad Request** ‚Äì —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ.  
- **401 Unauthorized** ‚Äì —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.  
- **403 Forbidden** ‚Äì —Å–µ—Ä–≤–µ—Ä –ø–æ–Ω—è–ª –∑–∞–ø—Ä–æ—Å, –Ω–æ –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å.  
- **404 Not Found** ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.  
- **405 Method Not Allowed** ‚Äì –º–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.  
- **408 Request Timeout** ‚Äì —Å–µ—Ä–≤–µ—Ä –Ω–µ –¥–æ–∂–¥–∞–ª—Å—è –æ—Ç–≤–µ—Ç–∞.  
- **415 Unsupported Media Type** ‚Äì –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –º–µ–¥–∏–∞.  
- **420 Bad Extension** ‚Äì –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ SIP.  
- **486 Busy Here** ‚Äì –∞–±–æ–Ω–µ–Ω—Ç –∑–∞–Ω—è—Ç.  
- **487 Request Terminated** ‚Äì –∑–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω–µ–Ω (CANCEL).  

#### **5xx (–û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞)** ‚Äì —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å  
- **500 Server Internal Error** ‚Äì –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.  
- **501 Not Implemented** ‚Äì —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.  
- **503 Service Unavailable** ‚Äì —Å–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.  
- **504 Server Time-out** ‚Äì —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª –≤–æ–≤—Ä–µ–º—è.  
- **505 Version Not Supported** ‚Äì –≤–µ—Ä—Å–∏—è SIP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.  

#### **6xx (–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏)** ‚Äì –∑–∞–ø—Ä–æ—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–∏–≥–¥–µ  
- **600 Busy Everywhere** ‚Äì –∞–±–æ–Ω–µ–Ω—Ç –∑–∞–Ω—è—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.  
- **603 Decline** ‚Äì –≤—ã–∑–æ–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.  
- **604 Does Not Exist Anywhere** ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.  
- **606 Not Acceptable** ‚Äì –º–µ–¥–∏–∞-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è.  

---

### **–ü—Ä–∏–º–µ—Ä SIP-–¥–∏–∞–ª–æ–≥–∞**  
1. **–í—ã–∑–æ–≤ (INVITE)**  
   ```  
   INVITE sip:bob@example.com SIP/2.0  
   From: <sip:alice@example.com>  
   To: <sip:bob@example.com>  
   Call-ID: 123456@alicepc  
   CSeq: 1 INVITE  
   ```  

2. **–û—Ç–≤–µ—Ç (180 Ringing)**  
   ```  
   SIP/2.0 180 Ringing  
   From: <sip:alice@example.com>  
   To: <sip:bob@example.com>  
   Call-ID: 123456@alicepc  
   CSeq: 1 INVITE  
   ```  

3. **–£—Å–ø–µ—à–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (200 OK)**  
   ```  
   SIP/2.0 200 OK  
   From: <sip:alice@example.com>  
   To: <sip:bob@example.com>  
   Call-ID: 123456@alicepc  
   CSeq: 1 INVITE  
   ```  

4. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (ACK)**  
   ```  
   ACK sip:bob@example.com SIP/2.0  
   From: <sip:alice@example.com>  
   To: <sip:bob@example.com>  
   Call-ID: 123456@alicepc  
   CSeq: 1 ACK  
   ```  

5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ (BYE)**  
   ```  
   BYE sip:bob@example.com SIP/2.0  
   From: <sip:alice@example.com>  
   To: <sip:bob@example.com>  
   Call-ID: 123456@alicepc  
   CSeq: 2 BYE  
   ```  

6. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (200 OK)**  
   ```  
   SIP/2.0 200 OK  
   From: <sip:alice@example.com>  
   To: <sip:bob@example.com>  
   Call-ID: 123456@alicepc  
   CSeq: 2 BYE  
   ```  
----------------


## **1. SIP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ (Headers)**  
–ó–∞–≥–æ–ª–æ–≤–∫–∏ SIP –ø–µ—Ä–µ–¥–∞—é—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –∑–∞–ø—Ä–æ—Å–µ/–æ—Ç–≤–µ—Ç–µ. –û–Ω–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∞–º, –Ω–æ —Å–æ —Å–≤–æ–µ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–æ–π.  

### **–û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**  
- **Via** ‚Äì –ø—É—Ç—å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–º –ø—Ä–æ–∫—Å–∏).  
  ```  
  Via: SIP/2.0/UDP pc1.example.com;branch=z9hG4bK776asdhds  
  ```  
- **From** ‚Äì –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞.  
  ```  
  From: "Alice" <sip:alice@example.com>;tag=1928301774  
  ```  
- **To** ‚Äì –ø–æ–ª—É—á–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞.  
  ```  
  To: "Bob" <sip:bob@example.org>  
  ```  
- **Call-ID** ‚Äì —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–∞–Ω—Å–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è UA).  
  ```  
  Call-ID: a84b4c76e66710@pc1.example.com  
  ```  
- **CSeq** ‚Äì –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä + –º–µ—Ç–æ–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤).  
  ```  
  CSeq: 314159 INVITE  
  ```  
- **Contact** ‚Äì –ø—Ä—è–º–æ–π –∞–¥—Ä–µ—Å –¥–ª—è —Å–≤—è–∑–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ REGISTER, 200 OK).  
  ```  
  Contact: <sip:alice@192.0.2.1>  
  ```  
- **Max-Forwards** ‚Äì –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–∫—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 70).  

### **–í–∞–∂–Ω—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**  
- **Allow** ‚Äì –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Allow: INVITE, ACK, BYE`).  
- **Content-Type** ‚Äì —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ —Ç–µ–ª–µ (–æ–±—ã—á–Ω–æ `application/sdp`).  
- **Expires** ‚Äì –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–ø–æ–¥–ø–∏—Å–∫–∏ (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö).  
- **Route** ‚Äì –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏.  
- **Record-Route** ‚Äì –∑–∞–ø–∏—Å—å –º–∞—Ä—à—Ä—É—Ç–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –ø—É—Ç–∏.  
- **Authorization/Proxy-Authorization** ‚Äì –¥–∞–Ω–Ω—ã–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.  

---

## **2. SDP (Session Description Protocol)**  
SDP –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ–¥–∏–∞—Å–µ–∞–Ω—Å–∞ (–∞—É–¥–∏–æ, –≤–∏–¥–µ–æ, –∫–æ–¥–µ–∫–æ–≤, IP-–∞–¥—Ä–µ—Å–æ–≤ –∏ –ø–æ—Ä—Ç–æ–≤). –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —Ç–µ–ª–µ SIP-—Å–æ–æ–±—â–µ–Ω–∏–π (–æ–±—ã—á–Ω–æ –≤ **INVITE** –∏ **200 OK**).  

### **–§–æ—Ä–º–∞—Ç SDP**  
```  
v=0  // –í–µ—Ä—Å–∏—è SDP  
o=alice 2890844526 2890844526 IN IP4 192.0.2.1  // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ—Å—Å–∏–∏  
s=–†–∞–∑–≥–æ–≤–æ—Ä —Å –ë–æ–±–æ–º  // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏  
c=IN IP4 192.0.2.1  // IP-–∞–¥—Ä–µ—Å –¥–ª—è –º–µ–¥–∏–∞  
t=0 0  // –í—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ)  
m=audio 49170 RTP/AVP 0 96  // –ú–µ–¥–∏–∞: –∞—É–¥–∏–æ, –ø–æ—Ä—Ç, RTP/AVP, –∫–æ–¥–µ–∫–∏  
a=rtpmap:0 PCMU/8000  // –ö–æ–¥–µ–∫ 0 (PCMU, 8 kHz)  
a=rtpmap:96 opus/48000/2  // –ö–æ–¥–µ–∫ 96 (Opus, 48 kHz, 2 –∫–∞–Ω–∞–ª–∞)  
```  

### **–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è**  
- **`m=` (media)** ‚Äì —Ç–∏–ø –º–µ–¥–∏–∞, –ø–æ—Ä—Ç, –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ–¥–µ–∫–∏.  
  - `m=audio 5004 RTP/AVP 0` ‚Üí –∞—É–¥–∏–æ, –ø–æ—Ä—Ç 5004, RTP —Å –∫–æ–¥–µ–∫–æ–º PCMU (0).  
- **`a=` (attribute)** ‚Äì –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:  
  - `a=rtpmap:0 PCMU/8000` ‚Üí —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ RTP —Å –∫–æ–¥–µ–∫–æ–º.  
  - `a=sendrecv` / `a=recvonly` / `a=inactive` ‚Äì –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞.  
- **`c=` (connection)** ‚Äì IP-–∞–¥—Ä–µ—Å –¥–ª—è –º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–∞.  

---

## **3. NAT-–ø—Ä–æ–±–ª–µ–º—ã –≤ SIP**  
NAT (Network Address Translation) –≤—ã–∑—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ SIP-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫:  
- **SIP —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏—è** —Å–æ–¥–µ—Ä–∂–∏—Ç IP-–∞–¥—Ä–µ—Å–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö (`Contact`, `Via`, SDP `c=`), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏.  
- **RTP-–º–µ–¥–∏–∞–ø–æ—Ç–æ–∫–∏** –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è NAT, –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–æ—Ä—Ç–æ–≤.  

### **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**  
1. **–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å UA –∑–∞ NAT**  
   - SIP-–ø–∞–∫–µ—Ç—ã —É—Ö–æ–¥—è—Ç –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π IP, –Ω–æ –æ—Ç–≤–µ—Ç—ã –Ω–µ –¥–æ—Ö–æ–¥—è—Ç, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π IP –Ω–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è.  
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –≤ SDP**  
   - UA —É–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π IP (`192.168.1.100`), –Ω–æ –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –¥–æ –Ω–µ–≥–æ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è.  
3. **–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π RTP**  
   - –û–¥–∏–Ω –∏–∑ –∞–±–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –º–µ–¥–∏–∞ –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ NAT.  

### **–†–µ—à–µ–Ω–∏—è**  
#### **1. STUN (Session Traversal Utilities for NAT)**  
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É —É–∑–Ω–∞—Ç—å —Å–≤–æ–π **–ø—É–±–ª–∏—á–Ω—ã–π IP –∏ –ø–æ—Ä—Ç** —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π STUN-—Å–µ—Ä–≤–µ—Ä.  
- –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ STUN:  
  ```  
  MAPPED-ADDRESS: 93.184.216.34:5060  
  ```  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ SDP:  
  ```  
  c=IN IP4 93.184.216.34  
  m=audio 5060 RTP/AVP 0  
  ```  

#### **2. TURN (Traversal Using Relays around NAT)**  
- –ï—Å–ª–∏ NAT —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π, STUN –Ω–µ –ø–æ–º–æ–∂–µ—Ç ‚Äì —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä.  
- TURN-—Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –º–µ–¥–∏–∞—Ç—Ä–∞—Ñ–∏–∫, –Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É.  

#### **3. ICE (Interactive Connectivity Establishment)**  
- –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç STUN –∏ TURN, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞—è –ª—É—á—à–∏–π –º–∞—Ä—à—Ä—É—Ç.  
- –í SDP –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è `a=candidate` —Å—Ç—Ä–æ–∫–∏ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏.  

#### **4. SIP ALG (Application Layer Gateway)**  
- NAT-—Ä–æ—É—Ç–µ—Ä –º–æ–∂–µ—Ç "–∏—Å–ø—Ä–∞–≤–ª—è—Ç—å" SIP-–ø–∞–∫–µ—Ç—ã, –ø–æ–¥–º–µ–Ω—è—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ IP –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–µ.  
- **–ü—Ä–æ–±–ª–µ–º–∞:** —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ª–æ–º–∞—è SIP.  

#### **5. Outbound Proxy (–∏–ª–∏ SIP-–ø—Ä–æ–∫—Å–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º NAT)**  
- –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç, –∫–∞–∫ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã.  

-------------------

### **–ö–∞–∫ —É–∑–Ω–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π IP-–∞–¥—Ä–µ—Å —á–µ—Ä–µ–∑ STUN**  

STUN (Session Traversal Utilities for NAT) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –∑–∞ NAT –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–≤–æ–π **–≤–Ω–µ—à–Ω–∏–π (–ø—É–±–ª–∏—á–Ω—ã–π) IP-–∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç**, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–Ω—ã –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã VoIP, WebRTC –∏ –¥—Ä—É–≥–∏—Ö P2P-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.  



## **1. –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã STUN**  
1. **–ö–ª–∏–µ–Ω—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, SIP-—Ç–µ–ª–µ—Ñ–æ–Ω) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ **STUN-—Å–µ—Ä–≤–µ—Ä** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `stun.l.google.com:19302`).  
2. **STUN-—Å–µ—Ä–≤–µ—Ä** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–π –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –µ–≥–æ **–ø—É–±–ª–∏—á–Ω—ã–π IP –∏ –ø–æ—Ä—Ç**, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω "–≤–∏–¥–∏—Ç".  
3. –ö–ª–∏–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ **SIP/SDP** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –º–µ–¥–∏–∞—Ç—Ä–∞—Ñ–∏–∫–∞.  


## **2. –ö–∞–∫ —É–∑–Ω–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π IP —á–µ—Ä–µ–∑ STUN**  

### **–°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö STUN-—Å–µ—Ä–≤–µ—Ä–æ–≤**  
–ú–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∏—Ç—å STUN-–∑–∞–ø—Ä–æ—Å —Å –ø–æ–º–æ—â—å—é —É—Ç–∏–ª–∏—Ç –∏–ª–∏ –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å–æ–≤.  

#### **–ü—Ä–∏–º–µ—Ä—ã –ø—É–±–ª–∏—á–Ω—ã—Ö STUN-—Å–µ—Ä–≤–µ—Ä–æ–≤:**  
- `stun.l.google.com:19302` (Google)  
- `stun1.l.google.com:19302`  
- `stun.voipbuster.com`  
- `stun.stunprotocol.org`  

#### **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ python —Å–∫—Ä–∏–ø—Ç:** 
```python
#!/usr/bin/python3

import stun

# –ó–∞–¥–∞–π—Ç–µ —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä STUN-—Å–µ—Ä–≤–µ—Ä–∞
stun_host = 'stun.l.google.com'
stun_port = 19302

external_ip = stun.get_ip_info()[1]
print(f"–í–Ω–µ—à–Ω–∏–π IP –∞–¥—Ä–µ—Å: {external_ip}")
```


#### **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ `curl` (–µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã):**  
```bash
curl -s https://api.ipify.org  # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ø—Ä–æ—Å—Ç–æ —É–∑–Ω–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π IP –±–µ–∑ STUN
# –∏–ª–∏
curl ifconfig.me ; echo
# –∏–ª–∏
dig +short myip.opendns.com @resolver1.opendns.com
```  
–ù–æ —ç—Ç–æ –Ω–µ STUN, –∞ –ø—Ä–æ—Å—Ç–æ HTTP-–∑–∞–ø—Ä–æ—Å.  

#### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `stunclient` (Python)**  
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:  
```bash
pip install pystun3
```  
–ó–∞–ø—É—Å–∫:  
```bash
python -m stun
```  
–í—ã–≤–æ–¥:  
```
NAT Type: Restricted Cone
External IP: 93.184.216.34
External Port: 54321
```



### **–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Wireshark (–∞–Ω–∞–ª–∏–∑ STUN-—Ç—Ä–∞—Ñ–∏–∫–∞)**  
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ **Wireshark**.  
2. –û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ —Ç—Ä–∞—Ñ–∏–∫ –ø–æ `stun`.  
3. –ù–∞–π–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç –æ—Ç STUN-—Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–ª–µ–º **`XOR-MAPPED-ADDRESS`** ‚Äì —ç—Ç–æ –≤–∞—à –≤–Ω–µ—à–Ω–∏–π IP –∏ –ø–æ—Ä—Ç.  



### **–°–ø–æ—Å–æ–± 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JavaScript (WebRTC)**  
–ë—Ä–∞—É–∑–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç STUN –¥–ª—è WebRTC. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:  
```javascript
const pc = new RTCPeerConnection({
  iceServers: [{ urls: "stun:stun.l.google.com:19302" }]
});

pc.createDataChannel("test");
pc.onicecandidate = (e) => {
  if (e.candidate) {
    console.log("Public IP:", e.candidate.address);
  }
};
pc.createOffer().then(offer => pc.setLocalDescription(offer));
```
–í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏:  
```
Public IP: 93.184.216.34
```



## **3. –§–æ—Ä–º–∞—Ç STUN-–∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞**  
### **–ó–∞–ø—Ä–æ—Å (STUN Binding Request)**  
```
0x0001 (Binding Request)  
0x0000 (Message Length)  
0x2112A442 (Magic Cookie)  
Transaction ID: [12 —Å–ª—É—á–∞–π–Ω—ã—Ö –±–∞–π—Ç]  
```  

### **–û—Ç–≤–µ—Ç (STUN Binding Response)**  
```
0x0101 (Binding Response)  
0x000C (Message Length = 12 –±–∞–π—Ç)  
0x2112A442 (Magic Cookie)  
Transaction ID: [—Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –≤ –∑–∞–ø—Ä–æ—Å–µ]  
XOR-MAPPED-ADDRESS: 93.184.216.34:54321  
```  



## **4. –ö–æ–≥–¥–∞ STUN –Ω–µ –ø–æ–º–æ–∂–µ—Ç?**  
- **–°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π NAT** ‚Äì —Å–µ—Ä–≤–µ—Ä –≤–∏–¥–∏—Ç —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.  
- **–î–≤–æ–π–Ω–æ–π NAT** ‚Äì —Å–ª–æ–∂–Ω—ã–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏.  
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ STUN** ‚Äì –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –±–ª–æ–∫–∏—Ä—É—é—Ç STUN-—Ç—Ä–∞—Ñ–∏–∫.  

–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **TURN** –∏–ª–∏ **ICE**.  




