### Использование утилиты `mount` в Linux
Утилита `mount` используется для подключения файловых систем (разделов дисков, сетевых ресурсов и т.д.) к каталогу в файловой системе Linux.

#### Основные команды:
1. **Просмотр всех смонтированных файловых систем**  
   ```bash
   mount
   ```
   - **Фильтрация вывода** (например, только ext4):  
     ```bash
     mount -t ext4
     ```
     ```bash
     # фильтрация по типу файловой системы
     mount | grep -E '^/dev'
     ```

2. **Монтирование устройства**  
   ```bash
   mount /dev/sdX# /путь/к/точке_монтирования
   ```
   - Пример:  
     ```bash
     mount /dev/sdb1 /mnt/mydrive
     ```

3. **Монтирование с указанием типа файловой системы**  
   ```bash
   mount -t тип_фс /dev/sdX# /точка_монтирования
   ```
   - Пример (для NTFS):  
     ```bash
     mount -t ntfs /dev/sdc1 /mnt/win
     ```

4. **Монтирование с опциями**  
   ```bash
   mount -o опции /dev/sdX# /точка_монтирования
   ```
   - Примеры опций:  
     ```bash
     mount -o ro /dev/sdb1 /mnt/readonly  # только для чтения
     mount -o remount,rw /                 # перемонтировать корень в режиме записи
     ```

5. **Монтирование всех файловых систем из `/etc/fstab`**  
   ```bash
   mount -a
   ```

6. **Размонтирование**  
   ```bash
   umount /точка_монтирования  # или
   umount /dev/sdX#
   ```

---

### Использование утилиты `findmnt` в Linux
Утилита `findmnt` отображает информацию о смонтированных файловых системах в удобном формате (в виде дерева или списка).

#### Основные команды:
1. **Вывод всех смонтированных ФС в виде дерева**  
   ```bash
   findmnt
   ```

2. **Вывод в виде списка**  
   ```bash
   findmnt -l
   ```

3. **Поиск по точке монтирования**  
   ```bash
   findmnt /точка_монтирования
   ```
   - Пример:  
     ```bash
     findmnt /mnt/mydrive
     ```

4. **Поиск по устройству**  
   ```bash
   findmnt /dev/sdX#
   ```
   - Пример:  
     ```bash
     findmnt /dev/sdb1
     ```

5. **Фильтрация по типу файловой системы**  
   ```bash
   findmnt -t тип_фс
   ```
   - Пример (показать все NFS):  
     ```bash
     findmnt -t nfs
     ```

6. **Вывод информации в JSON**  
   ```bash
   findmnt --json
   ```

7. **Поиск в `/etc/fstab`** (не смонтированные ресурсы)  
   ```bash
   findmnt --fstab
   ```

---

### Примеры совместного использования:
1. **Монтирование и проверка**  
   ```bash
   mount /dev/sdb1 /mnt/data && findmnt /mnt/data
   ```

2. **Поиск всех смонтированных ext4-разделов**  
   ```bash
   findmnt -t ext4
   ```

3. **Проверка занятости точки монтирования перед размонтированием**  
   ```bash
   findmnt /mnt/data  # Проверяем, смонтировано ли устройство
   umount /mnt/data   # Размонтируем, если нет активности
   ```
----------------------------------

Конкретный пример с Jira кластером из статьи [Настройка Jira Data Center cluster](https://github.com/sherbettt/BASH-cheats/blob/main/System%20engineering/18.%20Настройка%20Jira%20Data%20Center%20cluster.md)

Из вывода команды `mount` видно, что NFS-шары с сервера **192.168.87.3** успешно примонтированы в две точки:

### 1. **`/mnt/pve/nfs_storage`**
   ```bash
   192.168.87.3:/stg/8tb/share on /mnt/pve/nfs_storage type nfs4 (rw,relatime,vers=4.2,...,addr=192.168.87.3)
   ```
   - **Опции:** `hard` (повторяет запросы при таймаутах), `relatime`, `rw` (чтение/запись).

### 2. **`/mnt/share`**
   ```bash
   192.168.87.3:/stg/8tb/share on /mnt/share type nfs4 (rw,nosuid,relatime,...,soft,addr=192.168.87.3)
   ```
   - **Опции:** `soft` (возвращает ошибку при таймаутах вместо бесконечных повторов), `nosuid` (игнорирует SUID-биты).

### Что это значит?
- Одна и та же NFS-шара (`/stg/8tb/share`) примонтирована в **две разные точки** с разными параметрами.
- Вероятно, это сделано для разных целей (например, Proxmox VE использует `/mnt/pve/nfs_storage`, а `/mnt/share` — для ручного доступа).

### Проверка доступности NFS
1. **Попробуйте зайти в директорию:**
   ```bash
   ls -l /mnt/share/
   ```
   Если файлы отображаются — монтирование работает.

2. **Проверьте NFS-сервер (192.168.87.3):**
   ```bash
   showmount -e 192.168.87.3
   ```
   Должен показать экспортированные шары, включая `/stg/8tb/share`.

### Если есть проблемы:
- **Ошибка "Stale NFS file handle"?**  
  Попробуйте перемонтировать:
  ```bash
  umount -l /mnt/share  # lazy unmount
  mount /mnt/share      # или mount -a
  ```
- **NFS-сервер недоступен?**  
  Проверьте сеть и сервисы на сервере 192.168.87.3:
  ```bash
  ping 192.168.87.3
  systemctl status nfs-server  # на сервере
  ```

### Вывод:
**Монтирования работают**, но если нужно оставить только одно, удалите лишнюю запись из `/etc/fstab` и выполните `umount`.


