# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å Aptly –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ repo-new

## üìã **–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Aptly –Ω–∞ repo-new**

### **–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:**
```
acron-bookworm       (6 –ø–∞–∫–µ—Ç–æ–≤)
acron-buster         (8 –ø–∞–∫–µ—Ç–æ–≤)
borishof-buster      (559 –ø–∞–∫–µ—Ç–æ–≤)   ‚Üê –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
borishof             (4 –ø–∞–∫–µ—Ç–∞)
hh-buster            (29 –ø–∞–∫–µ—Ç–æ–≤)
kept-buster          (169 –ø–∞–∫–µ—Ç–æ–≤)
ligastavok-bullseye  (0 –ø–∞–∫–µ—Ç–æ–≤)
ligastavok-buster    (25 –ø–∞–∫–µ—Ç–æ–≤)
mbrus-bookworm       (6 –ø–∞–∫–µ—Ç–æ–≤)
mfc-buster           (4 –ø–∞–∫–µ—Ç–æ–≤)
moiseeva-buster      (5 –ø–∞–∫–µ—Ç–æ–≤)
mrg-bookworm         (12 –ø–∞–∫–µ—Ç–æ–≤)
systeme-buster       (61 –ø–∞–∫–µ—Ç–æ–≤)
```

### **–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:**
```
./bookworm [amd64] ‚Üí {
    acron: [acron-bookworm],
    mbrus: [mbrus-bookworm],
    mrg: [mrg-bookworm]
}

./buster [amd64] ‚Üí {
    acron1: [acron-buster],
    borishof: [borishof-buster],    ‚Üê –ö–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è borishof
    hh: [hh-buster],
    kept: [kept-buster],
    ligastavok: [ligastavok-buster],
    main: [systeme-buster],
    moiseeva: [moiseeva-buster]
}
```

## üÜï **–°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è**

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**

#### –ë–∞–∑–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
# –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
aptly repo create –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

# –°–æ–∑–¥–∞—Ç—å —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
aptly repo create -comment="–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ XYZ" –ø—Ä–æ–µ–∫—Ç-xyz

# –°–æ–∑–¥–∞—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
aptly repo create –ø—Ä–æ–µ–∫—Ç-buster -distribution="buster"

# –°–æ–∑–¥–∞—Ç—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
aptly repo create –ø—Ä–æ–µ–∫—Ç-amd64 -architectures="amd64,i386"
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
aptly repo list

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
aptly repo show –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –≤ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**

```bash
# –î–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –ø–∞–∫–µ—Ç
aptly repo add –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π /path/to/package.deb

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
aptly repo add –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π /path/to/debs/

# –î–æ–±–∞–≤–∏—Ç—å —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
aptly repo add -remove-files –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π /path/to/debs/

# –î–æ–±–∞–≤–∏—Ç—å —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
aptly repo add -filter="Priority (required)" –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π /path/to/debs/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
aptly repo search –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
aptly repo show -with-packages –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```

### **3. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞**

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–∞–∫ –Ω–æ–≤—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤
aptly publish repo –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
aptly publish repo -component="main" –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
aptly publish repo -component="main" -component="contrib" –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
aptly publish repo -distribution="stable" -architectures="amd64,i386" \
  -component="main" –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –º–æ—è-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```

#### –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞:
```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
aptly repo create -comment="–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞ NewApp" newapp-buster

# 2. –î–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã
aptly repo add newapp-buster /tmp/builds/newapp/*.deb

# 3. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–∞–∫ –Ω–æ–≤—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤
aptly publish repo -component="newapp" newapp-buster buster

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é
aptly publish list
aptly publish show buster
```

### **4. –†–∞–±–æ—Ç–∞ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º–∏**

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤:
```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
aptly repo create –Ω–æ–≤—ã–π-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-buster

# –î–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã
aptly repo add –Ω–æ–≤—ã–π-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-buster /path/to/packages/

# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–∞–∫ –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ
aptly publish repo -component="–Ω–æ–≤—ã–π-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç" –Ω–æ–≤—ã–π-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç-buster buster

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
aptly publish show buster
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ:
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–º–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
aptly snapshot create —Å—Ç–∞–±–∏–ª—å–Ω—ã–π-—Å–Ω–∏–º–æ–∫ from repo borishof-buster

# –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–Ω–∏–º–æ–∫ –∫–∞–∫ –Ω–æ–≤—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤
aptly publish snapshot —Å—Ç–∞–±–∏–ª—å–Ω—ã–π-—Å–Ω–∏–º–æ–∫ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–º–µ—à–∞–Ω–Ω—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤
aptly publish snapshot -component="borishof" —Å—Ç–∞–±–∏–ª—å–Ω—ã–π-—Å–Ω–∏–º–æ–∫ mixed-distro
```

### **5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –∏ —Å–Ω–∏–º–∫–∞–º–∏**

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–Ω–∏–º–∫–æ–≤ –¥–ª—è –±—ç–∫–∞–ø–∞:
```bash
# –°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–º–æ–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
aptly snapshot create backup-$(date +%Y%m%d) from repo borishof-buster

# –°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–º–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
aptly snapshot create publish-backup-$(date +%Y%m%d) from publish buster

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–Ω–∏–º–∫–∏
aptly snapshot list

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ —Å–Ω–∏–º–∫–∞
aptly repo import backup-20240101 –Ω–æ–≤—ã–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π "runtel-borishof-v2"
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –ø–∞–∫–µ—Ç–æ–≤:
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–∞
aptly repo search –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π "–∏–º—è-–ø–∞–∫–µ—Ç–∞"

# –°–æ–∑–¥–∞—Ç—å —Å–Ω–∏–º–æ–∫ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
aptly snapshot create –≤–µ—Ä—Å–∏—è-1.0 from repo –º–æ–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π \
  "–∏–º—è-–ø–∞–∫–µ—Ç–∞ (>= 1.0), –∏–º—è-–ø–∞–∫–µ—Ç–∞ (<< 1.1)"
```

## üöÄ **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è**

#### –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
```bash
aptly repo list
```

#### –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
```bash
aptly publish list
```

#### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π borishof-buster
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
aptly repo show borishof-buster

# –ü–æ–∏—Å–∫ –ø–∞–∫–µ—Ç–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
aptly repo search borishof-buster

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ dev/release –≤–µ—Ä—Å–∏—è–º
aptly repo search borishof-buster | awk '/borishof/ && /release/ || /dev/ {print}'
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
```bash
# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ buster
aptly publish show buster

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã
ls -la /var/www/aptly/public/buster/dists/buster/
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –≤ borishof-buster
```bash
# –î–æ–±–∞–≤–∏—Ç—å –æ–¥–∏–Ω –ø–∞–∫–µ—Ç
aptly repo add -remove-files borishof-buster /path/to/package.deb

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
aptly repo add borishof-buster /path/to/debs/

# –î–æ–±–∞–≤–∏—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ–∞–π–ª–æ–≤
aptly repo add -remove-files=false borishof-buster /path/to/package.deb
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é buster (–≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
aptly publish update buster

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
aptly publish show buster
```

### **3. –ü–æ–∏—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞–º–∏**

#### –ü–æ–∏—Å–∫ –ø–∞–∫–µ—Ç–æ–≤
```bash
# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ borishof-buster
aptly repo search borishof-buster

# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
aptly repo search borishof-buster "runtel-borishof-v2"

# –ü–æ–∏—Å–∫ –ø–æ –≤–µ—Ä—Å–∏–∏
aptly repo search borishof-buster | grep "1.5.0"
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–∞–∫–µ—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
aptly repo show -with-packages borishof-buster

# –ü–æ–¥—Å—á–µ—Ç –ø–∞–∫–µ—Ç–æ–≤
aptly repo show borishof-buster | grep "Number of packages"
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ –ø–∞–∫–µ—Ç–æ–≤
```bash
# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é
aptly repo remove borishof-buster "runtel-borishof-v2 (=1.5.0~release-487)"

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–∞
aptly repo remove borishof-buster "runtel-borishof-v2"

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ dev –≤–µ—Ä—Å–∏–∏
aptly repo remove borishof-buster "runtel-borishof-v2 (<< 1.5.0)"
```

## üåê **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º**

### **–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

#### –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é borishof:
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ /etc/apt/sources.list –∏–ª–∏ /etc/apt/sources.list.d/borishof.list
deb http://borishof:pheiporu1ieshaeL@projects.runtel.ru buster borishof

# –∏–ª–∏ –ø—Ä–æ—â–µ
deb http://projects.runtel.ru buster borishof
```

#### –†–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
deb http://borishof:pheiporu1ieshaeL@projects.runtel.ru buster borishof
‚Üë    ‚Üë                                     ‚Üë              ‚Üë       ‚Üë
—Ç–∏–ø  –ø—Ä–æ—Ç–æ–∫–æ–ª —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π          —Å–µ—Ä–≤–µ—Ä        –¥–∏—Å—Ç—Ä   –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```

### **–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∞—è —Å—Ç—Ä–æ–∫–∞:**

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: `borishof:pheiporu1ieshaeL` - –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
2. **–°–µ—Ä–≤–µ—Ä**: `projects.runtel.ru` - –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ Aptly
3. **–î–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤**: `buster` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–º–µ–Ω–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ `aptly publish list`
4. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `borishof` - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É –≤ —Å–µ–∫—Ü–∏–∏ `borishof: [borishof-buster]`

### **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

#### –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ):
```bash
deb http://projects.runtel.ru buster borishof
```

#### –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥—Ä—É–≥–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º:
```bash
# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
deb http://borishof:pheiporu1ieshaeL@projects.runtel.ru buster main

# –ü–∞–∫–µ—Ç—ã hh
deb http://borishof:pheiporu1ieshaeL@projects.runtel.ru buster hh

# –ü–∞–∫–µ—Ç—ã kept
deb http://borishof:pheiporu1ieshaeL@projects.runtel.ru buster kept
```

### **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–≤–æ–º—É —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—É:**

```bash
# –ï—Å–ª–∏ —Å–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—ã–π –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ "–º–æ–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤"
deb http://projects.runtel.ru –º–æ–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ main

# –ï—Å–ª–∏ —Å–æ–∑–¥–∞–ª–∏ –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç "newapp" –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–µ buster
deb http://projects.runtel.ru buster newapp
```

### **–î–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update

# –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
apt search runtel-borishof

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞
sudo apt install runtel-borishof-v2

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
sudo apt install runtel-borishof-v2=1.5.0~release-487
```

## üîß **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD (Ansible)**

### **–ü—Ä–∏–º–µ—Ä –ø–ª–µ–π–±—É–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤:**
```yaml
- name: –î–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π borishof-buster
  shell: |
    aptly repo add -remove-files borishof-buster /tmp/builds/{{ project_name }}/
  register: add_result
  changed_when: "'No packages found' not in add_result.stdout"

- name: –û–±–Ω–æ–≤–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é
  shell: aptly publish update buster
  when: add_result.changed

- name: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
  shell: |
    aptly repo search borishof-buster | grep "{{ package_name }}"
  register: verify_result
```

### **–ü–ª–µ–π–±—É–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
```yaml
- name: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  shell: |
    aptly repo create {{ repo_name }}

- name: –î–æ–±–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç—ã –≤ –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  shell: |
    aptly repo add {{ repo_name }} {{ deb_files_path }}

- name: –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
  shell: |
    aptly publish repo -component="{{ component_name }}" {{ repo_name }} {{ distribution_name }}

- name: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–±-–¥–æ—Å—Ç—É–ø
  shell: |
    chmod -R 755 /var/www/aptly/public/
    systemctl reload nginx
```

## üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ**

### **–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è:**
```bash
#!/bin/bash
echo "=== –°–æ—Å—Ç–æ—è–Ω–∏–µ Aptly –Ω–∞ repo-new ==="
echo

echo "1. –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:"
aptly repo list

echo -e "\n2. –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:"
aptly publish list

echo -e "\n3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ borishof-buster:"
aptly repo show borishof-buster | grep -E "(Number of packages|Storage)"

echo -e "\n4. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–∞–∫–µ—Ç—ã –≤ borishof-buster:"
aptly repo search borishof-buster | tail -20
```

### **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø–∞–∫–µ—Ç–æ–≤:**
```bash
#!/bin/bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ dev –≤–µ—Ä—Å–∏–∏ (–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10)
aptly repo search borishof-buster | grep "dev" | sort -V | head -n -10 | \
while read package; do
    aptly repo remove borishof-buster "$package"
done

# –û–±–Ω–æ–≤–∏—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏—é
aptly publish update buster
```

## üö® **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è**

### **1. –ö–ª–∏–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç –ø–∞–∫–µ—Ç—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
curl -s http://projects.runtel.ru/buster/dists/buster/borishof/binary-amd64/Packages.gz | gunzip | head -5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
curl -u borishof:pheiporu1ieshaeL -s http://projects.runtel.ru/buster/dists/buster/Release

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
aptly publish show buster
```

### **2. –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
ls -la /path/to/package.deb

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –ø–∞–∫–µ—Ç–∞
dpkg -I /path/to/package.deb

# –î–æ–±–∞–≤–∏—Ç—å —Å –æ—Ç–ª–∞–¥–∫–æ–π
aptly repo add -verbose borishof-buster /path/to/package.deb
```

### **3. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–∞
aptly repo search borishof-buster | grep "runtel-borishof-v2" | sort -V

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â—É—é –≤–µ—Ä—Å–∏—é
aptly repo remove borishof-buster "runtel-borishof-v2 (=–∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∞—è-–≤–µ—Ä—Å–∏—è)"
```

## üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
cat /etc/nginx/sites-available/aptly

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª .htpasswd (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
cat /var/www/aptly/.htpasswd

# –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
htpasswd -b /var/www/aptly/.htpasswd –Ω–æ–≤—ã–π_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∞—Ä–æ–ª—å
```

### **–†–æ—Ç–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π:**
```bash
# –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è borishof
htpasswd -b /var/www/aptly/.htpasswd borishof –Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å

# –£–≤–µ–¥–æ–º–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è
# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É –≤ /etc/apt/sources.list.d/borishof.list
```

## üìù **–ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞**

### **–°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è:**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
aptly repo create –Ω–æ–≤—ã–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
aptly repo add –Ω–æ–≤—ã–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π /path/to/debs/

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
aptly publish repo -component="main" –Ω–æ–≤—ã–π-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–æ–≤—ã–π-–¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
aptly publish update –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
aptly repo list
aptly publish list

# –ü–æ–∏—Å–∫ –ø–∞–∫–µ—Ç–æ–≤
aptly repo search —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

# –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
deb http://projects.runtel.ru –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
sudo apt update
```

### **–ü—É—Ç–∏ –∫ –¥–∞–Ω–Ω—ã–º:**
```
–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: /var/lib/aptly/db
–ü—É–±–ª–∏–∫–∞—Ü–∏–∏: /var/www/aptly/public/
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: /etc/aptly.conf
–°–Ω–∏–º–∫–∏: /var/lib/aptly/snapshots/
```

–≠—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞–º–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –¥–æ—Å—Ç—É–ø–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞.
